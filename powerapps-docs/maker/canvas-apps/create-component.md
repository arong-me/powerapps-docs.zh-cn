---
title: 创建画布应用的组件 |Microsoft Docs
description: 画布应用的可重用组件简介
author: yifwang
ms.service: powerapps
ms.topic: article
ms.date: 12/12/2018
ms.author: yifwang
search.audienceType:
- maker
search.app:
- PowerApps
ms.openlocfilehash: cc556eaac82f910fa7044def9969c2fb8ca04c4b
ms.sourcegitcommit: a99f9458a50f6fa64706200bec97273aac20036d
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 05/22/2019
ms.locfileid: "66034862"
---
# <a name="create-a-component-for-canvas-apps"></a>创建画布应用的组件

> [!IMPORTANT]
> 此功能是仍实验，且默认情况下禁用。 有关详细信息，请参阅[实验性和预览功能](working-with-experimental.md)。

组件是可重用构建基块的画布应用，以便应用创建者可以创建使用应用程序中或跨应用的自定义控件。 高级功能，例如自定义属性，以启用组件中的复杂功能。 本文介绍了组件的概念和一些示例。

组件是用于构建具有类似的控件模式的大型应用。 如果更新的组件定义，该应用程序中的所有实例将都反映所做的更改。 此外可以通过使用一个或多个组件，因为不复制并粘贴控件，该复制开销来提高性能。 组件还便于协作开发并标准化了在组织中的外观和体验。

## <a name="prerequisite"></a>先决条件

打开**应用设置**屏幕上，选择**高级设置**，并启用该功能，以及确保**改进了应用程序呈现**还启用了。

## <a name="component-canvas"></a>组件画布

您可以创建从一个组件**组件**菜单上的**插入**选项卡或下一步图形所示，在左侧的导航栏中。 此列表显示了按创建时间排序的应用中定义的组件。

![组件列表视图](./media/create-component/list-view.png)

无论采用哪种方法，一个空 canvas 将出现，你可以为组件定义的一部分添加控件。 如果编辑画布中的一个组件，你将更新其他应用屏幕和其他应用中的相同组件的实例。

如果选择一个屏幕，可以从左侧的导航栏中的现有组件的列表中选择一个组件或**组件**菜单上的**插入**选项卡。选择组件，就像插入控件插入在屏幕上，该组件的实例。

## <a name="scope"></a>范围

将组件视为属性具有与接口封装黑色框。 无法访问外部组件，从组件中的控件，不能引用到通过在组件中的组件之外的任何内容。 如果您尝试，出现错误。 作用域限制保留组件的数据协定，简单而又一致，并可帮助启用无缝组件定义更新，尤其是跨应用程序。 可以通过创建一个或多个自定义属性来更新该组件的数据协定。

## <a name="variables"></a>变量

组件不支持**UpdateContext**函数，但您可以创建和更新使用的组件中的变量**设置**函数。 这些变量的作用域仅限于该组件，但您可以从外部访问这些组件通过利用自定义输出属性。

## <a name="import-and-export"></a>导入和导出

若要从一个应用程序的一个或多个组件导入另一个，请选择**导入组件**在下拉列表中的组件。 对话框中列出的所有应用都包含有权编辑的组件。 选择一个应用程序、，然后选择**导入**来导入所有在该应用中的组件的最新的已发布的版本。 导入至少一个组件后，可以编辑您的副本并删除任何不需要。

> [!div class="mx-imgBorder"]
> ![导入组件对话框](./media/create-component/import-components.png)

如果将导出一个组件，可创建可以导入到不同的应用的本地文件。 如果应用包含同一组件的修改的版本，系统会提示来确定是否要替换为修改后的版本或取消导入。 

## <a name="custom-properties"></a>自定义属性

组件可以接收输入的值和发出数据，如果创建一个或多个自定义属性。 这些方案都高级，需要了解公式和绑定约定。

输入的属性是一个组件接收组件中使用的数据的方式。 输入的属性将显示在**属性**选项卡的右侧窗格中选择组件的实例。 就像在其他控件中配置的标准属性，可以使用表达式或公式，配置输入的属性。 其他控件具有输入属性，如**默认**的属性**文本输入**控件。

输出属性可以发出数据或组件的状态。 例如， **Selected**上的属性**库**控件是一个输出属性。 当您创建一个输出属性时，您可以确定什么其他控件可以引用的组件状态。

本演练中进一步说明了这些概念。

## <a name="create-an-example-component"></a>创建示例组件

在此示例中，将创建一个菜单组件，类似于此图形，并且，可以更改的文本并在多个屏幕、 应用程序，还是两者都使用：

![最终库](./media/create-component/menu-instance.png)

1. 在 PowerApps Studio 中创建一个空白应用程序。

1. 在左侧的导航栏中，打开组件的列表，然后选择**新组件**。

    ![组件列表](./media/create-component/component-list.png)

1. 当悬停在该新组件，选择省略号 （...），请选择**重命名**，然后键入或粘贴**MenuComponent**。

1. 在右侧窗格中，将组件的宽度设置为**150**和到其高度**250**，然后选择**新自定义属性**。

    ![新的属性](./media/create-component/new-property.png)

1. 在中**显示名称**，**属性名称**，并**说明**框中，键入或粘贴**项**。

    ![显示名称、 属性名称、 说明框](./media/create-component/property-names.png)

    当指定的属性名称时，因为需要引用该组件通过此名称在编写公式时，不包含空格 (例如， **ComponentName.PropertyName**)。

    显示名称将显示在**属性**选项卡的右侧窗格，如果您选择的组件。 描述性的显示名称可帮助你和其他决策者了解此属性的用途。 **描述**如果你将鼠标悬停在此属性的显示名称将显示在工具提示**属性**选项卡。

1. 在中**数据类型**列表中，选择**表**，然后选择**创建**。

    ![数据类型的属性](./media/create-component/property-data-type.png)

    **项**属性设置为基于你指定的数据类型的默认值，但可以将其设置为适合您需要一个值。 如果指定的数据类型为**表**或**记录**，你可能想要更改的值**项**属性以匹配你想要输入到组件的数据架构。 在这种情况下，会将其更改为字符串的列表。

    如果你选择的属性名称上，可以在编辑栏中设置属性的值**属性**的右侧窗格的选项卡。

    ![在属性选项卡上的自定义输入的属性](./media/create-component/properties-tab.png)

    下一步的图形所示，您还可以编辑该属性的值上**高级**的右侧窗格的选项卡。

1. 设置组件的**项**属性设为此公式：

    ```powerapps-dot
    Table({Item:"SampleText"})
    ```

    ![公式](./media/create-component/set-component-items.png)

1. 在组件中，插入一个空白垂直**库**控件。

1. 请确保属性列表显示**项**属性 （因为它执行默认情况下），然后将该属性的值设置为以下表达式：

    ```powerapps-dot
    MenuComponent.Items
    ```

    这样一来，**项**的属性**库**控制读取，并依赖于**项**输入组件的属性。

1. 设置**库**控件的**BorderThickness**属性设置为**1**并将其**TemplateSize**属性设置为**50**.

1. 中的模板**库**控件，添加**标签**控件。

    ![添加标签，并设置边框的库](./media/create-component/add-label.png)

接下来，将向屏幕添加组件，并指定要显示的组件的字符串表。

1. 在左侧的导航栏中，选择列表的屏幕，并选择默认屏幕。

    ![默认屏幕](./media/create-component/default-screen.png)

1. 上**插入**选项卡上，打开**组件**菜单，并选择**MenuComponent**。

    ![插入](./media/create-component/insert.png)

    名为的新组件**MenuComponent_1**默认情况下。

1. 设置**项**的属性**MenuComponent_1**为以下公式：

    ```powerapps-dot
    Table({Item:"Home"}, {Item:"Admin"}, {Item:"About"}, {Item:"Help"})
    ```

    此实例类似于此图中，但你可以自定义文本和每个实例的其他属性。

    ![最终库](./media/create-component/menu-instance.png)

到目前为止，已创建一个组件，并将其添加到应用程序。 接下来，你将创建一个输出属性，用于反映用户选择菜单中的项。

1. 打开组件的列表，然后选择**MenuComponent**。

1. 在右侧窗格中，选择**属性**选项卡，然后选择**新自定义属性**。

1. 在中**显示名称**，**属性名称**，并**说明**框中，键入或粘贴**所选**。

1. 下**属性类型**，选择**输出**，然后选择**创建**。

1. 上**高级**选项卡上，设置的值**选定**属性设置为此表达式中，如有必要调整数字中的库名称：

    ```powerapps-dot
    Gallery1.Selected.Item
    ```

    ![高级的窗格](./media/create-component/advance.png)

1. 在应用程序的默认屏幕上，添加一个标签，并设置其**文本**属性设置为此表达式中，如有必要调整数字中的组件名称：

    ```powerapps-dot
    MenuComponent_1.Selected
    ```

    请注意， **MenuComponent_1**是一个实例，而不是组件定义的名称的默认名称。 您可以重命名任何实例。

1. 在按住 Alt 键，在菜单中选择的每个项。

    **标签**控件会反映出你选择最新的菜单项。

## <a name="known-limitations"></a>已知的限制

- 在撰写本文时，数据源不会保存与组件，因此禁用窗体和数据的表。
- 如果在组件中创建一个变量，该变量仅限于该组件，并且不会显示与应用程序变量。
- PowerApps 不支持组件中的集合。
- 无法将组件插入库、 窗体或数据卡。
- 组件的主实例是本地 master 和应用程序以作为作用域。 如果更改了主实例，仅在应用内组件的副本将反映此更改。 在其他应用中的副本将保持相同，除非再次导入组件库。 这些应用程序中的所有主机实例将自动检测和更新。
- 导入的组件时，无法打包媒体文件。
