---
title: 设置 PowerApps 中的时间线控件（部分）| MicrosoftDocs
description: 了解如何设置 PowerApps 中的时间线控件（部分）
ms.date: 03/10/2020
ms.service: powerapps
author: kabala123
ms.assetid: 7F495EE1-1208-49DA-9B02-17855CEB2FDF
ms.author: kabala
manager: shujoshi
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 272eab58ed332f87a49eae275a98e4a4bdc69cc6
ms.sourcegitcommit: a02b20113164acb11955d27ef4ffa421ee0fba9d
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/10/2020
ms.locfileid: "3114298"
---
# <a name="set-up-timeline-section-control"></a>设置时间线部分（控件）

可根据企业或组织需求自定义“时间线”中用于跟踪与客户或联系人之间所有通信的活动。

  > [!div class="mx-imgBorder"]
  > ![PowerApps 中的活动的时间线视图](../../user/media/TimelineViewOfActivity.png "PowerApps 中的活动的时间线视图")

  1. 搜索记录
  2. 记笔记
  3. 添加信息和活动
  4. Filter
  5. 更多命令
  6. 活动状态
  7. 活动图标
  8. 日期和时间

若要了解详细信息，请参阅[向时间线添加约会、电子邮件、电话联络、注释或任务活动](../../user/add-activities.md)。

自定义设置分为两个区域：

- 模块
- 活动类型
- 字段

## <a name="customize-modules"></a>自定义模块

模块为“活动”、“公告”和“注释”。 作为定制员，您可以按照企业需求选择要向用户显示哪些模块。

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2.  打开模型驱动应用，然后在命令栏上，选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png "设置") > **高级设置**。

3.  转到**设置** > **自定义** > **自定义系统**。 将在新浏览器窗口中打开解决方案资源管理器页面。 

4.  展开默认解决方案窗格中**组件**下的**实体**。

5.  选择实体，然后选择**窗体**。 例如，选择**客户**实体。

6.  选择窗体类型为**主**的**交互式体验的客户**记录。 将在新浏览器窗口中打开**交互式体验的客户**窗体。

   > [!div class=mx-imgBorder] 
   > ![选择名称中具有交互式体验的实体窗体](media/account-interactive-experience.png "选择名称中具有交互式体验的实体窗体")

   对于统一接口，需要使用包含 `<Entity> for Interactive experience`的窗体名称。 下面是其他实体的窗体名称：

   | 实体 | 名称 |
   |--------------------------|----------------------------------|
   | 客户 | 交互式体验的客户 |
   | 案例 | 交互式体验的案例 |
   | 联系人 | 交互式体验的联系人 |

7.  双击**时间线**部分中的**对话选项卡**字段。 将显示**活动选项卡属性**对话框。

    > [!div class=mx-imgBorder] 
    > ![双击社交窗格中的字段](media/timeline-conversation-tabs-field.png "双击社交窗格中的字段")   

8.  为**筛选条件**容器中的**显示这些模块**字段选择**显示选定项**选项。

9.  选择要对用户显示的模块。 仅选择您的组织需要的模块。

10. 在**其他选项**容器中指定以下项。


    | 字段/选项 | 说明 | 值 |
    |------------------------------------------|--------------------------------------------------------------|---------------------------|
    | 创建体验的默认模块 | 选择时间线中的默认创建体验所属模块。 <br><br> 默认值为**注释**。  | 注意 |
    | 显示筛选器窗格 | 如果要对用户显示筛选器图标，请选中此复选框。 如果将此复选框保留为空，则不会向用户提供筛选器。 |  |
    | 默认情况下展开筛选器窗格 | 默认情况下，如果希望在展开模式下显示筛选器窗格，请选中此复选框。 <br><br> **注意：** 当时间线显示在多个列上时，筛选器窗格将在时间线记录旁边显示为一列。 即使您已清除“时间线”配置中的**默认情况下展开筛选器窗格**复选框，此筛选器窗格也始终会显示给您的代理。|
    | Sort | 根据时间线中显示的记录选择排序顺序。 排序基于为活动选择的字段。 如果“公告”、“注释”或“活动”无字段，则基于**上次更新时间**字段进行排序。 <br><br> 默认排序顺序为**降序**。  <br><br> **注意：** 更改排序顺序不会更改时间线控件中显示的时间属性。 若要自定义时间线卡窗体，请参阅[自定义卡窗体](#customize-the-card-form)。  | 降序 |
    | 结果数量 | 选择**更多**选项前时间线中显示的最大记录数量。 只要选择**更多**选项，时间线都会显示所配置记录的数量。 可配置的值范围为 1 到 50。 <br><br> 默认值为 **10**。 | 10 |

    > [!div class=mx-imgBorder] 
    > ![设置时间线模块](media/timeline-module.png "设置时间线模块")

11. 选择**确定**，然后选择**保存**。

12. 选择**发布**发布自定义项。

## <a name="customize-activity"></a>自定义活动

作为定制员，您可以选择希望哪些实体按照业务要求对用户显示活动。 要获得更好的性能，请仅选择特定于业务的活动，不选择不使用的活动。

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2.  打开模型驱动应用，然后在命令栏上，选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png "设置") > **高级设置**。

3.  转到**设置** > **自定义** > **自定义系统**。 将在新浏览器窗口中打开解决方案资源管理器页面。  

4.  展开默认解决方案窗格中**组件**下的**实体**。

5.  选择实体，然后选择**窗体**。 例如，选择**客户**实体。

6.  选择窗体类型为**主**的**交互式体验的客户**记录。 将在新浏览器窗口中打开**交互式体验的客户**窗体。

    > [!div class=mx-imgBorder] 
    > ![选择名称中具有交互式体验的实体窗体](media/account-interactive-experience.png "选择名称中具有交互式体验的实体窗体")

    对于统一接口，需要使用包含 `<Entity> for Interactive experience`的窗体名称。 下面是其他实体的窗体名称：

    | 实体 | 名称 |
    |--------------------------|----------------------------------|
    | 客户 | 交互式体验的客户 |
    | 案例 | 交互式体验的案例 |
    | 联系人 | 交互式体验的联系人 |

7.  双击**时间线**部分中的**对话选项卡**字段。 将显示**活动选项卡属性**对话框。

    > [!div class=mx-imgBorder] 
    > ![双击社交窗格中的字段](media/timeline-conversation-tabs-field.png "双击社交窗格中的字段") 

8.  为**筛选条件**容器中的**显示这些活动**字段选择**显示选定项**选项。

9.  选择要对用户显示的活动。

10. 从**数据**容器中的**时间线排序依据**选项的列表选择选项。 例如，选择**上次更新时间**选项。

11. 在**其他选项**容器中指定以下项。
    
    | 字段/选项 | 说明 |值 |
    |------------------------------------------|------------------------------------------------------------|-------------------|
    | 使用以下项显示活动标题 |  值可以是**默认格式**和**字段标签**。 <br><br> **注意：** <ul><li> 如果选择**默认格式**，则始终应该为**使用以下项显示活动**字段选择**默认字段**。 <br> ![默认格式和默认字段](media/default-format-default-fields.png "默认格式和默认字段") </li> <li> 如果选择**字段标签**，则可以为**使用以下项显示活动**选择**默认字段**或**卡窗体**。 <br> ![字段标签和默认主页](media/field-label-card-form.png "默认格式和默认字段") </li> <li> 如果选择**默认格式**，然后为**使用以下项显示活动**字段选择**卡窗体**，则系统将忽略**卡窗体**值，并使用**默认字段**显示活动。 </li> <ul>| 默认格式 |
    | 使用以下项创建活动 | 选择希望用户如何创建活动。 值可以是**快速创建窗体**和**主窗体**。 | 快速创建窗体 |
    | 使用以下项显示活动 | 选择活动的显示方式。 值可以是**默认字段**和**卡窗体**。  如果选择**卡窗体**，则需要为活动选择一个卡窗体。  | |
    | 选择活动 | 从列表中选择活动。  <br><br> **注意：** 仅当为**使用以下项显示活动**字段选择**卡窗体**，才显示此字段。| 电子邮件 |
    | 选择卡窗体 | 从列表中选择卡窗体。  <br><br> **注意：** 仅当为**使用以下项显示活动**字段选择**卡窗体**，才显示此字段。 | 电子邮件卡窗体 |

    > [!div class=mx-imgBorder] 
    > ![自定义时间线模块](media/timeline-activity1.png "自定义时间线模块")

12. 选择**确定**，然后选择**保存**。

13. 选择**发布**发布自定义项。

由于此过程中考虑的示例为**客户**，所以我们看看客户页的**时间线**控件中的**电子邮件**活动。

   | 字段 | 值 |
   |---------------------------|---------------------------|
   | 使用以下项显示活动标题 | 默认格式 |
   | 使用以下项显示活动 | 默认字段 |

   > [!div class=mx-imgBorder] 
   > ![时间线中的电子邮件活动](media/timeline-email-activity1.png "时间线中的电子邮件活动")

   折叠模式下电子邮件活动的默认字段中包含以下对象：

   1. 来自 \<负责人\> 的电子邮件
   2. 主题
   3. 说明
   4. 活动状态
   5. 日期和时间

修改**电子邮件卡**窗体（从**电子邮件**窗体）并更新**客户**实体中**交互式体验的客户**窗体中的选项之后，可以看到以下变化。

   | 字段 | 值 |
   |---------------------------|---------------------------|
   | 使用以下项显示活动标题 | 字段标签 |
   | 使用以下项显示活动 | 卡窗体 |
   | 选择活动 | 电子邮件 |
   | 选择卡窗体 | 电子邮件卡窗体 |

   > [!div class=mx-imgBorder] 
   > ![时间线中的电子邮件活动](media/timeline-email-activity2.png "时间线中的电子邮件活动")

   折叠模式下电子邮件活动的默认字段中包含以下对象：

   1. 负责人\<姓名\>
   2. 优先级
   3. 说明
   4. 活动状态

下面是活动的默认字符串：

| 活动 | 默认字段 | 图像 |
|----------------|--------------------------------|------------------------------|
| 约会 | `Appointment from <Owner Name>`| ![约会](media/appointment.png "约会") |
| 电子邮件 | `Email from <Owner Name>` | ![Email](media/email.png "电子邮件") |
| 电话联络 | `Phone Call from <Owner Name>` <br> 当代理开始呼叫时。| ![电话联络](media/phonecall-owner.png "电话联络") | 
| | `Phone Call from <Contact>` <br> 当客户开始呼叫时。 | ![电话联络](media/phonecall-contact.png "电话联络") |
| 任务 | `Task modified by <Owner Name>` | ![任务](media/task.png "任务") |
| 注释 | `Note modified by <Owner Name>` | ![注释](media/note.png "注释") |
| Post | `Post by <Owner Name>` | ![Post](media/post.png "Post") |

## <a name="customize-field-sections"></a>自定义字段部分

在时间线部分中，用户可以看到每个活动一个卡（基于启用的活动）。 每个卡在折叠模式和展开模式下显示特定字段。 例如，在折叠模式、悬停模式和展开模式下查看**电子邮件**活动卡。 

**电子邮件卡折叠模式**：默认情况下，活动卡处于折叠模式。


   > [!div class=mx-imgBorder] 
   > ![折叠模式下的时间线卡](media/email.png "折叠模式下的时间线卡")

**电子邮件卡悬停模式**：悬停光标时，可以看到特定于每种活动卡类型的一些命令。

   > [!div class=mx-imgBorder] 
   > ![折叠模式下的时间线卡](media/email-hover.png "折叠模式下的时间线卡")

**时间线卡展开模式**：在卡上进行选择时，其展开，并显示特定于每个活动卡类型的少量命令。

   > [!div class=mx-imgBorder] 
   > ![展开模式下的时间线卡](media/email-expanded.png "展开模式下的时间线卡")

在卡中，如果要显示对企业至关重要的任何字段，可以自定义这些字段。 此外，还可以将字段从一个部分移到另一个部分，如从**页眉**部分移到**详细信息**部分。 若要了解详细信息，请参阅[自定义卡窗体](#customize-the-card-form)。

### <a name="customize-the-card-form"></a>自定义卡窗体

所有卡窗体都包含以下部分：

   | 部分注释 | 部分名称 | 显示列 |
   |------------------------------|--------------------------------------|---------------------------------------|
   | A | 颜色条 | 颜色条部分始终不向用户显示。 |
   | B | 页眉 | 字段 1 和 2 对用户显示。 |
   | C | 详细信息 | 字段 3、4 和 5 对用户显示，其中，字段 3 和 4 在折叠模式下显示，字段 5 在展开模式下显示。 |
   | D | 页脚 | 页脚部分始终不向用户显示。 |

例如，请参阅**电子邮件窗体**。

**电子邮件配置屏幕**

   > [!div class=mx-imgBorder] 
   > ![电子邮件卡配置](media/customize-field-email.png "电子邮件卡配置")

**电子邮件卡折叠模式**

**页脚**部分中的字段 **1** 和 **2** 和**详细信息**部分中的字段 **3** 和 **4** 在折叠模式下显示。 处于折叠模式的字段 **3** 和 **4** 没有以富文本格式显示内容。

   > [!div class=mx-imgBorder] 
   > ![折叠模式下的电子邮件卡](media/email-card-collapsed.png "折叠模式下的电子邮件卡")

**电子邮件卡悬停模式**

悬停模式下显示 **页眉**部分中的字段 **1** 和 **2**  ，和 **详细信息** 部分中的字段 **3** 和 **4** 。

   > [!div class=mx-imgBorder] 
   > ![折叠模式下的电子邮件卡](media/email-card-hover.png "折叠模式下的电子邮件卡")

**电子邮件卡展开模式**

展开模式下显示**详细信息**部分中的字段**5**。 展开模式下的字段 **3** 不会以富文本格式显示内容，而展开模式下的字段 **4** 则以富文本格式显示内容。

   > [!div class=mx-imgBorder] 
   > ![展开模式下的电子邮件卡](media/email-card-expanded.png "展开模式下的电子邮件卡")

若要自定义卡窗体，请执行以下步骤：

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2.  打开模型驱动应用，然后在命令栏上，选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png "设置") > **高级设置**。

3.  转到**设置** > **自定义** > **自定义系统**。 将在新浏览器窗口中打开解决方案资源管理器页面。  

4.  展开默认解决方案窗格中**组件**下的**实体**。

5.  选择实体，然后选择**窗体**。 例如，选择**电子邮件**实体。

6.  从列表中选择**电子邮件卡窗体**记录。 将在新的浏览器窗口中打开**电子邮件卡窗体**。

7.  添加、移动或删除字段。 若要了解详细信息，请参阅[在窗体中添加、配置、移动或删除字段](add-move-or-delete-fields-on-form.md)。

   在此过程中，我们将修改**电子邮件卡**。 

   > [!div class=mx-imgBorder] 
   > ![电子邮件卡配置](media/customize-field-email1.png "电子邮件卡配置")

   **页眉**部分中的**创建时间**字段已替换为**优先级**。

   同样，**详细信息**部分中的**优先级**字段已删除，**主题**字段已上移。

8.  选择**确定**，然后选择**保存**。

9.  选择**发布**发布自定义项。

现在，您可以查看**时间线**控件中的改变。 在折叠模式下，您可以查看对卡所做更改。

   > [!div class=mx-imgBorder] 
   > ![电子邮件卡配置](media/email2.png "电子邮件卡配置")

> [!Note]
> 如果字段没有任何值，则卡中字段值保持为空。 

## <a name="enable-custom-activity-in-timeline"></a>在时间线中启用自定义活动

创建自定义实体时，您可能希望在时间线中将自定义实体对用户显示为活动。 若要将自定义实体显示为活动，需要在创建自定义实体期间启用某些选项。

> [!Note]
> 请确保在创建自定义实体之前，将其作为活动启用。 创建自定义实体后，不能将其作为活动启用，以及在**时间线**控件中对用户显示。

若要在时间线中启用自定义活动，请执行以下步骤。

[步骤 1：创建实体](#step-1-create-an-entity)

[步骤 2：将实体添加到模型驱动应用中](#step-2-add-entity-to-the-model-driven-app)

### <a name="step-1-create-an-entity"></a>步骤 1：创建实体

可以在[经典模式](#classic-mode)下或 [Power Apps](#powerapps) 中创建实体。 

#### <a name="classic-mode"></a>经典模式

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2.  打开模型驱动应用，然后在命令栏上，选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png) > **高级设置**。

3.  转到**设置** > **自定义** > **自定义系统**。 将在新浏览器窗口中打开解决方案资源管理器页面。  

4.  选择默认解决方案窗格中**组件**下的**实体**。

5.  选择**新建**创建实体。 将显示一个新的浏览器窗口。

6. 按照 [创建实体](https://docs.microsoft.com/dynamics365/customerengagement/on-premises/customize/create-entities)主题中的说明输入必填字段。 

   > [!Note]
   > [创建实体](https://docs.microsoft.com/dynamics365/customerengagement/on-premises/customize/create-entities)主题甚至也适用于 Dynamics 365 模型驱动应用。

7. 选择自定义实体的显示区域。

8. 向下滚动到**通信与协作**部分，然后选择必需选项。

9. 向下滚动到**数据服务**部分，然后选中**允许快速创建**复选框。 此选项允许您通过快速创建窗体打开实体。

10. 向上滚动到**实体定义**部分，然后选中**定义为活动实体**复选框。 此选项将实体作为活动启用。 

    > [!Note]
    > 只有在创建实体的过程中，才可以启用此选项。 创建实体后，不能更新此复选框。

11. 确保也选中**显示在活动菜单中**复选框。

    > [!Note]
    > 此选项确保活动在**时间线**控件菜单中列出。

    > [!div class=mx-imgBorder] 
    > ![显示活动](media/display-activity-classicmode.png "显示活动")

12. 选择**保存**。

13. 选择**发布**发布自定义项。

#### <a name="powerapps"></a>PowerApps

按照[创建自定义实体](../common-data-service/data-platform-create-entity.md)主题使用 PowerApps 创建实体。

执行[创建实体](../common-data-service/data-platform-create-entity.md#create-an-entity)中的步骤 3 之后，保存创建的实体之前，确保执行以下操作：

1. 展开**更多设置** > **实体类型和所有权**。

2. 从**选择实体类型**下拉列表选择**活动实体**选项。

3. 确保选中**显示在活动菜单中**复选框。

4. 展开**创建和更新设置**。

5. 选中**启用快速创建窗体**复选框。

    > [!div class=mx-imgBorder] 
    > ![显示活动](media/display-activity-pa.png "显示活动")

6. 选择其他任何必需选项，然后选择**创建**。

### <a name="step-2-add-entity-to-the-model-driven-app"></a>步骤 2：将实体添加到模型驱动应用中

创建实体并将其作为活动启用后，需要将该实体添加到模型驱动应用。

1. 登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2. 选择模型驱动应用磁贴中的省略号 (**...**)。 例如，**客户服务中心**应用磁贴。

3. 选择**在应用程序设计器中打开**。 将在新选项卡中打开应用程序设计器。

4. 在画布区域中**实体视图**下查找创建的自定义实体。

5. 选择**窗体**。 将在组件窗格中显示此选项。

6. 选中**快速创建窗体**区域下的复选框。 如果用户选择**时间线**控件中的 **+** 按钮，则此选项使用快速创建窗体。

    > [!div class=mx-imgBorder] 
    > ![显示活动](media/app-designer-activity.png "显示活动")

7. 选择**保存**。

8. 选择**发布**。

## <a name="enable-custom-activities-in-timeline-for-mobile-client"></a>在时间线中为移动客户端启用自定义活动

准备好要对使用移动设备的用户显示的自定义活动之后，必须启用这些活动。 请执行以下步骤启用。

### <a name="enable-for-mobile"></a>为移动设备启用 

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2. 打开模型驱动应用，然后在命令栏上，选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png) > **高级设置**。

3.  转到**设置** > **自定义** > **自定义系统**。 将在新浏览器窗口中打开解决方案资源管理器页面。  

4.  展开默认解决方案窗格中**组件**下的**实体**。

5.  从列表中选择实体。 例如，“客户”。

6.  向下滚动到 **Outlook 与移动电话**部分，然后选中以下选项的复选框：

    -   为移动设备启用（根据需要）
    -   在移动设备中为只读（根据需要）

7.  选择**保存**。

8.  选择**发布**发布自定义项。

### <a name="select-the-modules-to-display"></a>选择要显示的模块

（按照需求）为实体选择**为移动设备启用**和**在移动设备中为只读**选项之后，需要选择时间线中要显示的模块。 如果要显示所有模块，请选择**全部显示**，如果要按照业务需要显示一个或多个模块，请选择**显示选定项**。 如果选择**显示选定项**，请选择要显示的模块。
按照[自定义模块](#customize-modules)部分中的说明执行步骤 1-8，然后保存和发布自定义设置。

   > [!div class=mx-imgBorder] 
   > ![选择要显示的时间线模块](media/timeline-activity.png "选择要显示的时间线模块")

## <a name="enable-or-disable-rich-text-editor-for-notes-in-timeline"></a>为时间线中的注释启用或禁用富文本编辑器

用户可使用富文本编辑器有重点的为注释创建丰富的格式正确的内容。 此编辑器引入了常用的文字处理器功能。 若要了解详细信息，请参阅[记笔记](https://docs.microsoft.com/dynamics365/customer-service/customer-service-hub-user-guide-basics#take-a-note)。

默认已启用此功能。 如果以后要对用户禁用和启用，请执行以下步骤：

1.  登录到您的 `https://<YourOrgURL>.dynamics.com/apps` 环境。

2. 打开一个模型驱动应用，然后在命令栏上选择**设置** ![设置](../model-driven-apps/media/powerapps-gear.png) > **管理** > **系统设置**。

3. 在**系统设置**对话框中的**常规**选项卡下，向下滚动并选中或取消选中**使用富文本更轻松地设置时间线中创建的注释的格式**字段。 的复选框。

4. 选择**确定**。

    > [!div class=mx-imgBorder] 
    > ![启用富文本编辑器](media/timeline-note-enable-rich-text-editor.png "启用富文本编辑器")

将根据复选框的选择情况对用户启用或禁用富文本编辑器。 

## <a name="see-also"></a>另请参阅

[时间线控件的常见问题解答](faqs-timeline-control.md)

[客户服务中心应用中的时间线部分](https://docs.microsoft.com/dynamics365/customer-service/customer-service-hub-user-guide-basics#timeline)

[向时间线添加约会、电子邮件、电话联络、注释或任务活动](../../user/add-activities.md)
