---
title: 在 Power Apps 中配置模型驱动应用程序主窗体的事件处理程序 | MicrosoftDocs
description: 了解如何配置事件处理程序
author: Mattp123
ms.author: matp
manager: kvivek
ms.date: 06/27/2018
ms.service: powerapps
ms.topic: article
ms.assetid: dc0ebb3f-0c00-413a-968f-9cfd107055c0
search.audienceType:
- maker
search.app:
- PowerApps
- D365CE
ms.openlocfilehash: 385255d46ad358a8b33385e9e1495bd310cb1cb4
ms.sourcegitcommit: dd2a8a0362a8e1b64a1dac7b9f98d43da8d0bd87
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 12/02/2019
ms.locfileid: "2863621"
---
# <a name="configure-model-driven-app-form-event-handlers"></a>配置模型驱动应用程序窗体的事件处理程序

 可以为窗体中的以下区域配置 Power Apps 窗体的事件处理程序。  
  
|元素|事件|说明|  
|-------------|-----------|-----------------|  
|表单|`OnLoad`|在加载窗体时发生。|  
||`OnSave`|在保存数据时发生。|  
|选项卡|`TabStateChange`|在展开或折叠选项卡时发生。|  
|字段|`OnChange`|在字段中的数据发生变化以及控件失去焦点时发生。|  
|IFRAME|`OnReadyStateComplete`|在 IFRAME 的内容加载时发生。|  
  
 事件处理程序包括一个对 JavaScript Web 资源的引用，以及一个在 Web 资源内定义的将在事件发生时执行的函数。 每个元素最多可以配置 50 个单独的事件处理程序。  
  
> [!IMPORTANT]
>  事件处理程序配置不正确可能导致脚本错误，从而可能导致窗体无法正确加载或正常运行。 如果您不是脚本的开发者，请确保完全了解脚本所需的配置选项。  
>   
>  不要使用来自不是您信任的来源的库来配置脚本事件处理程序。 可以使用脚本执行用户能执行的任何操作，而编写得不好的脚本可能会极大地降低窗体的性能。  
>   
>  在配置了事件处理程序之后，务必对其进行测试以确认其正常工作。  
  
### <a name="to-configure-an-event-handler"></a>配置事件处理程序 
  
1.  在窗体编辑器中，选择要为其配置处理程序的事件的元素。  
  
2.  在[“主页”选项卡](form-editor-user-interface-legacy.md#home-tab)上的**编辑**组中，选择**更改属性**，或者直接双击元素。  
  
3.  在**元素属性**对话框中，选择“事件”选项卡。  
  
4.  展开**窗体库** 区域。 如果包含要设置为事件处理程序的函数的库尚未列出，请添加该库。  
  
5.  若要将窗体库添加到事件处理程序：  
    1.  在**事件列表**的**窗体库**部分，选择**添加**。  
  
    2.  在可用的 JavaScript Web 资源列表中查找 Web 资源。 选择它，然后选择**添加**。  
  
         如果需要的 JavaScript Web 资源不存在，请选择**新建**打开一个新 Web 资源窗体，创建一个 Web 资源。  
  
    3.  若要创建 JavaScript 资源：  
        1.  在 Web 资源窗体中，设置以下属性：  
  
            |属性|值|  
            |--------------|-----------|  
            |姓名|**必需**。 键入 Web 资源的名称。|  
            |显示名称|**必需**。 键入要在 Web 资源列表中显示的名称。|  
            |说明|（可选） 键入对 Web 资源的说明。|  
            |类型|**必需**。 选择**脚本 (JScript)** 。|  
            |语言|（可选） 选择可用于您的组织的语言之一。|  
  
        2.  如果您已经有了一个脚本，我们强烈建议您使用**浏览** 按钮查找该文件并将其上载。  
  
             或者，您也可以选择**文本编辑器**按钮，然后在**编辑内容**对话框中粘贴或键入该脚本的内容。  
  
            > [!NOTE]
            >  由于这个简单的文本编辑器不提供任何可检查脚本正确性的功能，因此，一般情况下，应始终尽量使用 Visual Studio 之类的单独应用程序来编辑脚本，然后再上载脚本。  
  
        3.  选择**保存**，然后关闭该 Web 资源对话框。  
  
        4.  您创建的 Web 资源当前在**查找记录** 对话框中处于选中状态。 选择**添加**关闭该对话框。  
6.  在**事件处理程序** 分区中，选择要为其设置事件处理程序的事件。  
  
7.  选择**添加**以打开**处理程序属性**对话框。  
  
8. 在**详细信息**选项卡上，选择相应的库，并键入应为事件执行的函数的名称。  
  
9. 默认情况下，事件处理程序处于启用状态。 如果不想启用该事件，请清除**已启用**复选框。  
  
     有些函数需要向函数传递执行上下文。 如果需要，请选择**将执行上下文作为第一个参数传递**。  
  
     有些函数可以接受一组参数来控制函数的行为。 如果需要这些参数，请在**将传递给函数的以逗号分隔的参数列表**中输入它们。  
  
10. 在**依赖项**选项卡上，将脚本依赖的所有字段添加到**从属字段**区域。  
  
11. 选择**确定**以关闭**处理程序属性**对话框。  
  
12. 输入事件处理程序之后，可以使用绿色箭头上下移动函数来调整其相对于其他函数的执行顺序。  
  
13. 选择**确定**以关闭“元素属性”对话框。  
  
14. 选择**保存**以保存您所做的更改。 选择**发布**发布窗体。  
  
> [!NOTE]
>  虽然用户界面 (UI) 让您可以使用向上和向下绿色箭头调整脚本加载的顺序，但脚本实际不按顺序进行加载。   

## <a name="next-steps"></a>后续步骤

[使用“主”窗体及其组件](use-main-form-and-components.md)
