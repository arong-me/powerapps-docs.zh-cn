---
title: 在 PowerApps 中配置模型驱动应用主窗体的事件处理程序 | MicrosoftDocs
description: 了解如何在 Dynamics 365 for Customer Engagement 中配置事件处理程序
Keywords: Main form; Configure event handlers; Dynamics 365
author: Mattp123
applies_to:
- Dynamics 365 (online)
- Dynamics 365 Version 9.x
- powerapps
ms.author: matp
manager: kvivek
ms.date: 06/27/2018
ms.service: crm-online
ms.topic: article
ms.assetid: dc0ebb3f-0c00-413a-968f-9cfd107055c0
ms.openlocfilehash: e05e9d840a2b3ad7d8d5c74e8e3b670504f739b0
ms.sourcegitcommit: aba996b1773ecdf62758e06b34eaf57bede29e08
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 08/08/2018
ms.locfileid: "39668818"
---
# <a name="configure-model-driven-app-form-event-handlers"></a>配置模型驱动应用窗体事件处理程序

 可以为窗体中的以下区域配置适用于 PowerApps 窗体的窗体事件处理程序：  
  
|元素|事件|描述|  
|-------------|-----------|-----------------|  
|窗体|`OnLoad`|加载窗体时发生。|  
||`OnSave`|保存数据时发生。|  
|选项卡|`TabStateChange`|展开或折叠选项卡时发生。|  
|字段|`OnChange`|当字段中的数据更改和控件失去焦点时发生。|  
|IFRAME|`OnReadyStateComplete`|加载 IFRAME 的内容时发生。|  
  
 事件处理程序包含对 JavaScript Web 资源和在事件发生时将执行的 Web 资源中定义的函数的引用。 每个元素中最多可配置 50 个独立的事件处理程序。  
  
> [!IMPORTANT]
>  错误地配置事件处理程序可能会导致脚本错误，从而可能导致窗体无法正常加载或运行。 如果你不是脚本的开发人员，请首先确保你完全了解脚本所需的配置选项。  
>   
>  请勿使用不是来自你信任的源的库来配置脚本事件处理程序。 脚本可用于执行用户可能执行的任何操作，编写很差的脚本可能会严重损坏窗体的性能。  
>   
>  配置事件处理程序后，请始终对它进行测试以验证它是否能正常工作。  
  
### <a name="to-configure-an-event-handler"></a>配置事件处理程序 
  
1.  在窗体编辑器中，选择具有要为其配置处理程序的事件的元素。  
  
2.  在[“开始”选项卡](form-editor-user-interface-legacy.md#home-tab)上的“编辑”组中，选择“更改属性”或只需双击此元素即可。  
  
3.  在元素属性对话框中，选择“事件”选项卡。  
  
4.  展开“窗体库”区域。 如果尚未列出包含要设置为事件处理程序的函数的库，请添加此库。  
  
5.  将窗体库添加到事件处理程序：  
    1.  在“事件列表”的“窗体库”部分中，选择“添加”。  
  
    2.  在可用的 Web 资源列表中找到 JavaScript Web 资源。 选择它，然后选择“添加”。  
  
         如果所需的 JavaScript Web 资源不存在，请选择“新建”以打开新的 Web 资源窗体并创建一个资源。  
  
    3.  创建 JavaScript Web 资源：  
        1.  在 Web 资源窗体中设置以下属性：  
  
            |属性|值|  
            |--------------|-----------|  
            |名称|必填。 键入 Web 资源的名称。|  
            |显示名称|必填。 键入要在 Web 资源列表中显示的名称。|  
            |描述|可选。 键入 Web 资源的说明。|  
            |类型|必填。 选择“脚本(JScript)”。|  
            |语言|可选。 选择一种组织可用的语言。|  
  
        2.  如果已有脚本，我们强烈建议使用“浏览”按钮来查找此文件并上传。  
  
             或者，可以选择“文本编辑器”按钮，然后在“编辑内容”对话框中粘贴或键入脚本的内容。  
  
            > [!NOTE]
            >  由于此简单的文本编辑器不提供任何检查脚本正确性的功能，因此通常应该始终尝试使用 Visual Studio 等单独的应用程序来编辑脚本，然后上传脚本。  
  
        3.  选择“保存”并关闭 Web 资源对话框。  
  
        4.  现在，“查找记录”对话框中选中了所创建的 Web 资源。 选择“添加”以关闭此对话框。  
6.  在“事件处理程序”部分中，选择要为其设置事件处理程序的事件。  
  
7.  选择“添加”以打开“处理程序属性”对话框。  
  
8. 在“详细信息”选项卡上，选择相应的库，然后键入应为此事件执行的函数名称。  
  
9. 默认启用事件处理程序。 如果不想启用此事件，请取消选中“已启用”复选框。  
  
     某些函数需要执行上下文被传递给函数。 如果需要，选择“将执行上下文作为第一个参数传递”。  
  
     某些函数可以接受一组参数来控制函数的行为。 如果需要，请在“将传递给函数的以逗号分隔的参数列表”中输入它们。  
  
10. 在“依赖项”选项卡上，将脚本所依赖的任何字段添加到“从属字段”区域中。  
  
11. 选择“确定”以关闭“处理程序属性”对话框。  
  
12. 当输入事件处理程序时，可以通过使用绿色箭头向上或向下移动来调整函数相对于任何其他函数的执行顺序。  
  
13. 选择“确定”以关闭元素属性对话框。  
  
14. 选择“保存”以保存更改。 选择“发布”以发布窗体。  
  
> [!NOTE]
>  虽然用户界面 (UI) 使你可以使用向上和向下的绿色箭头来调整脚本的加载顺序，但实际上脚本并未按顺序加载。   

## <a name="next-steps"></a>后续步骤

[使用主窗体及其组件](use-main-form-and-components.md)
