---
title: 添加网页以在门户中呈现记录列表 | MicrosoftDocs
description: 有关如何添加和配置以在门户中呈现记录列表的说明。
author: tapanm-msft
manager: kvivek
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 02/05/2020
ms.author: tapanm
ms.reviewer: ''
ms.openlocfilehash: 96c5ede672a57b6f01a87cf8aacf093db57ab234
ms.sourcegitcommit: 2d21c2c65875f97dff6d5843611d4221a4282f22
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 02/05/2020
ms.locfileid: "3027673"
---
# <a name="about-entity-lists"></a>关于实体列表

实体列表是数据驱动型配置，用于添加呈现记录列表的网页，而无需开发人员在门户中显示网格。 通过使用实体列表，您可以在门户上公开要显示的记录。

网格支持排序，并可在记录数量超出指定页面大小时进行分页。 如果已指定**详细信息视图的网页**，则每条记录都将包含该页面的链接，并且记录的 ID 将随 ID 查询字符串参数名称一起附加到查询字符串。 实体列表还支持多个视图。 如果指定了多个视图，将呈现下拉列表，允许用户在各种视图之间进行切换。

数据也可按当前门户用户、当前门户用户的上级客户帐户和当前门户网站进行筛选。 如果两个筛选条件（**门户用户属性**和**帐户属性**）都存在某个值，则门户将呈现下拉列表，以允许用户查看自己的（我的）数据或上级客户帐户的数据。

## <a name="add-an-entity-list-to-your-portal"></a>将实体列表添加到您的门户

实体列表包含与网页和各种属性的关系，以便控制门户内记录列表的初始化。 与网页的关系允许对网站内指定页面节点的列表定义进行动态检索。 若要查看现有的实体视图或创建新的实体视图，请转至**门户** > **实体列表**。

> [!Note]
> - 实体列表必须与列表的指定网站中的网页关联才可在网站中查看。
> - 实体列表中不支持多选选项集。

与实体列表关联的网页可通过选择左侧菜单中的**相关**导航链接中所列的**网页**链接进行查看。 创建您的实体列表时，第一步是选择要在门户中呈现列表的实体。 然后，您将选择要呈现的一个或多个模型驱动应用视图。

在创建或编辑网页时，可在网页窗体中提供的查找字段中指定实体列表。 页面模板通常为“页面”模板，但由于主模板包含确定是否应呈现实体列表的必要逻辑，因此也可是针对内容而设计的其他几种模板之一。

## <a name="entity-list-attributes-and-relationships"></a>实体列表属性和关系

|              客户              |                                                                                                                                                                                        说明                                                                                                                                                                                         |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              客户              |                                                                                                                                                                记录的描述性名称。 此字段为必填字段。                                                                                                                                                                 |
|          实体名称           |                                                                                                                                               保存的查询视图将从中加载的实体的名称。 此字段为必填字段。                                                                                                                                               |
|              视图​​              |                                                                          要呈现的目标实体中的保存的查询视图的名称。 此字段为必填字段。 如果指定了多个视图，网页中将包含下拉列表，供用户在各种视图之间进行切换。                                                                           |
|           页面大小            |                                                                                                                                            一个整数值，用于指定每页的记录数。 此字段为必填字段。 默认值：10                                                                                                                                             |
|   详细信息视图的网页    |                                                                                                        可为每个记录链接到的可选网页。 将把 ID 查询字符串参数名称和记录 ID 追加到此网页的 URL 的查询字符串。                                                                                                        |
|      “详细信息”按钮标签      |                     已指定了**详细信息视图的网页**时为详细信息视图显示的文本。 默认：视图详细信息 <br>**注意**：对于为 Common Data Service 环境安装和启用的每种语言包，将提供一个字段用以使用相关语言输入消息。                      |
|      用于执行创建的网页       |                                                                                                                                                             可选网页，将充当创建按钮的目标。                                                                                                                                                              |
|      “创建”按钮标签       |                              已指定了**创建的网页**时为创建按钮显示的文本。 默认：创建 <br>**注意**：对于为 Common Data Service 环境安装和启用的每种语言包，将提供一个字段用以使用相关语言输入消息。                              |
| ID 查询字符串参数名称 |                                                                                                                                           在详细信息视图的网页 URL 的查询字符串中提供的参数名称。 默认值：id                                                                                                                                           |
|        空列表文本         |  **已弃用**。  无记录时显示的消息。<br>**注意**：对于为 Common Data Service 环境安装和启用的每种语言包，将提供一个字段用以使用相关语言输入消息。                                                           |
|     门户用户属性      |                                                                                      用于表示门户用户记录（联系人或系统用户）的主实体的一个可选查找属性，可将当前用户的 ID 应用于该属性来筛选列表中呈现的数据。                                                                                      |
|       帐户属性        |                                                                                       用于表示客户记录的主实体的一个可选查找属性，可将当前用户联系人的父客户帐户值应用于该属性来筛选列表中呈现的数据。                                                                                       |
|       网站属性        |                                                                                                          用于表示网站的主实体的一个可选查找属性，可将当前网站的 ID 应用于该属性来筛选列表中呈现的数据。                                                                                                          |
|         已启用搜索         | 一个可选布尔值，用于指示是否应启用搜索。 将呈现一个文本框，供用户对记录执行快速搜索。 使用星号 (\*) 通配符基于部分文本进行搜索。 搜索将视图中各列的“Or”条件筛选器追加到视图的预定义筛选器条件，以便查询并返回结果记录。 |
|    搜索占位符文本     |                                                                                                                                                      一个可选字符串，用作初始加载时文本框中显示的标签。                                                                                                                                                       |
|      搜索工具提示文本       |                                                                                                                                             一个可选字符串，用作用户指向**搜索**文本框时显示的工具提示。                                                                                                                                              |
|                                |                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="add-custom-javascript"></a>添加自定义 JavaScript

窗体上的“选项”选项卡中包含可在其中输入自定义 [!INCLUDE[pn-javascript](../../../includes/pn-javascript.md)] 的文本区域；如果页面中包含 jQuery 库，也可以在此处使用该库。 将把该脚本块添加到网页底部，页面的结尾窗体标记前。

![自定义 JavaScript 示例](../media/custom-javascript-example.png "自定义 JavaScript 示例")  

此列表异步获取其数据，并且获取完毕后，将触发自定义 [!INCLUDE[pn-javascript](../../../includes/pn-javascript.md)] 可侦听的事件 `loaded`，并处理网格中的项。 以下代码是一个普通示例：
```
$(document).ready(function (){
$(".entitylist.entity-grid").on("loaded", function () {
$(this).children(".view-grid").find("tr").each(function (){
// do something with each row
$(this).css("background-color", "yellow");
});
});
}); 
```

查找特定属性字段并获取其值，以便可以修改该值的呈现。 以下代码获取包含 `accountnumber` 属性的值的每个表格单元格。 将 `accountnumber` 替换为实体和视图的相应属性。
```
$(document).ready(function (){
   $(".entitylist.entity-grid").on("loaded", function () {
      $(this).children(".view-grid").find("td[data-attribute='accountnumber']").each(function (i, e){
         var value = $(this).data(value);
         // now that you have the value you can do something to the value
      });
   });
});
```
## <a name="entity-list-configuration"></a>实体列表配置

可以为实体列表中的记录轻松启用和配置操作（创建、编辑、删除等）。 还可以替代默认标签、大小和其他属性，以便完全按照所需方式显示实体列表。

这些设置位于“实体列表”窗体的“配置”部分中。 默认情况下，仅显示**基本设置**。 选择**高级设置**可查看更多设置。

![配置实体列表](../media/configure-entitylist.png "配置实体列表")  

**属性**

|名称                   |说明|
|---------------------------|-----------|
|**基本设置**         |   |
| 视图操作              |用于为适用于实体集并将显示在网格上方的操作添加操作按钮。 可用操作包括： <ul><li>创建​​</li> <li>下载</li></ul> 选择以下选项之一将显示该操作的配置区域。|
| 项目操作             |用于为适用于单个记录并将为网格中的每行显示的操作添加操作按钮（如果实体权限已授予适宜的权限）。 通常可执行以下操作：<ul><li>详细信息</li><li>编辑</li><li>删除​​</li><li>工作流</li><li>激活​​</li><li>停用​​</li></ul> 选择以下选项之一将显示该操作的配置区域。 有关每个操作的详细信息，请参阅以下内容。 此外，可按实体为某些实体提供特殊操作：<ul><li>计算商机的价值（商机）</li><li>取消案例操作（事件）</li><li>结束（解决）案例操作（事件）</li><li>将报价单转换为订单（报价单）</li><li>将订单转换为发票（销售订单）</li><li>从商机生成报价单（商机）</li><li>丢单操作（商机）</li><li>赢单操作（商机）</li><li>重开案例操作（事件）</li><li>将商机设置为暂候（商机）</li></ul>|
| 替代列属性|用于替代网格中各列的显示设置。<ul><li>属性：您要替代的列的逻辑名称</li><li>显示名称：替代默认值的新列标题</li><li>宽度：替代默认值的列宽度（以百分比或像素为单位）。 另请参阅“网格列宽度样式”</li></ul> 若要替代某列的设置，请选择 **+ 列**并填写详细信息。|
|**高级设置**      |  |
| 正在加载消息           |替代在加载网格时显示的默认 HTML 消息。|
| 错误消息             |替代在加载网格的过程中发生错误时显示的默认 HTML 消息。|
| 拒绝访问消息     |替代当用户没有足够的实体权限查看实体列表时显示的默认 HTML 消息。|
| 空消息             |替代在网格不包含数据时显示的 HTML 消息。|
| \"详细信息窗体\"对话框       |控制用户激活详细信息操作时显示的对话框的设置。|
| \"编辑窗体\"对话框          |控制用户激活编辑操作时显示的对话框的设置。|
| \"创建窗体\"对话框        |控制用户激活创建操作时显示的对话框的设置。|
| \"删除\"对话框             |控制用户激活删除操作时显示的对话框的设置。|
| \"错误\"对话框              |控制在任何操作过程中出现错误时显示的对话框的设置。|
| CSS                 |指定将应用到包含整个网格区域的 HTML 元素的 CSS 类。|
| 网格 CSS 类            |指定将应用于实体列表的 HTML \<table\> 元素的 CSS 类。|
| 网格列宽度样式   |配置以**像素**还是**百分比**指定替代列属性中的**宽度**值。|

**常规操作设置**

一般来说，实体操作具有可配置的设置。 在任何情况下，这都是以自定义的形式为您提供更多选项，并且字段不是必填字段。 只需添加此操作即可对门户执行此操作（如果已通过实体权限授予了相应权限）。

通常可以为每个操作配置相应对话框，这些对话框仅当您选择**需要确认**时才显示。


| 客户                   | 说明                                                                                                                                                                                                                   |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **基本设置**         |                                                                                                                                                                                                                               |
| 需要确认? | 确定选择了操作时，确认是否提示用户确认。                                                                                                                                 |
| **高级设置**      |                                                                                                                                                                                                                               |
| 确认           | 替换当用户激活此操作时显示的确认 HTML 消息。                                                                                                                                         |
| 按钮标签           | 替代实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                    |
| 按钮工具提示         | 替代用户指向实体列表行中显示的此操作按钮的按钮时显示的工具提示文本。                                                                                           |
| 按钮 CSS 类       | 向按钮添加 CSS 类。                                                                                                                                                      |
| 重定向到网页    | 某些（而不是全部）操作允许其完成时执行重定向。 （对删除操作强烈推荐，但在大多数其他情况下可选）可选择完成了操作时要重定向到的网页。 |
| 重定向 URL           | **重定向到网页**选项的备用选择允许重定向到特定&mdash;URL。                                                                                                                                   |

**常规对话框高级设置**

|**名称**                 |**说明**                                                                                                                         |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 标题                    | 替代对话框的标题栏中显示的 HTML。|                                                                         
| 主按钮文本      | 覆盖显示在对话框中主（删除）按钮中显示的 HTML。                                                         |
| 关闭按钮文本        | 覆盖显示在对话框中关闭（取消）按钮中显示的 HTML。                                                           |
| 屏幕阅读器取消按钮文本   | 覆盖与对话框的“取消”按钮关联的屏幕阅读器文本。                                                           |
| 大小                     | 指定“删除”对话框的大小。 选项是默认、大和小。 默认大小为默认值。 |
| CSS                | 指定将应用于生成的对话框的 CSS 类。                                                            |
| 磁贴 CSS 类           | 指定将应用于生成的对话框标题栏的 CSS 类。                                                |
| 主按钮 CSS 类 | 指定将应用于对话框的主（删除）按钮的 CSS 类。                                          |
| 关闭按钮 CSS 类   | 指定将应用于对话框的关闭（取消）按钮的 CSS 类。                                            |

**创建操作设置**

如果实体权限已授予了“创建”权限，启用**创建操作**将在实体列表上方呈现一个按钮，选择该按钮时，将显示一个对话框，其中包含一个实体窗体，供用户创建新记录。

| 姓名               | 说明                          |
|--------------------|--------------------------------------|
| **基本设置**     |                                                                                                                                                                       |
| 实体窗体     | 指定将用于创建新记录的实体窗体。 此下拉列表中将包含为实体列表的实体类型配置的所有实体窗体。 <br>**注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果创建操作未提供任何实体窗体，则会将其忽略，并且该按钮将不会呈现在实体列表中。 |
| **高级设置**          |                                                                                                                                                                       |
| 按钮标签                                                                                                                                                                                                                 | 替代列表上方的“创建操作”按钮中显示的 HTML 标签。                                                                                        |
| 按钮工具提示                                                                                                                                                                                                               | 替代用户指向“创建操作”按钮时显示的工具提示文本。                                                                         |

**创建窗体对话框高级设置**

|**姓名**               |**说明**                                                                                                                                 |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| 加载消息        | 替代在加载对话框时显示的消息。                                                                                  |
| 标题                  | 替代对话框的标题栏中显示的 HTML。                                                                                  |
| 屏幕阅读器取消按钮文本 | 覆盖与对话框的“取消”按钮关联的屏幕阅读器文本。                                                                   |
| 大小                   | 指定“创建窗体”对话框的大小。 选项是默认、大和小。 默认大小为“大”。 |
| CSS              | 指定将应用于生成的对话框的 CSS 类。                                                                    |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的 CSS 类。                                                        |

**下载操作设置**

启用**下载操作**将在实体列表上方呈现一个按钮，选择该按钮时，可将列表中的数据下载到 [!INCLUDE[pn-excel-short](../../../includes/pn-excel-short.md)] (.xlsx) 文件。

| 姓名              | 说明                                                                                        |
|-------------------|----------------------------------------------------------------------------------------------------|
| **基本设置**    |                                                                                                    |
| 无​​              |                                                                                                    |
| **高级设置** |                                                                                                    |
| 按钮标签      | 替代实体列表上方的“下载操作”按钮中显示的 HTML 标签。            |
| 按钮工具提示    | 替代用户指向“下载操作”按钮时显示的工具提示文本。 |

**详细信息操作设置**

启用**详细信息操作**将允许用户查看实体列表中选定行的只读实体窗体。


|                 姓名                  |                                                                                                                                                                                                                      说明                                                                                                                                                                                                                      |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|          **基本设置**           |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|              实体窗体              | 指定将用于查看选定实体详细信息的实体窗体。 此下拉列表中将包含为实体列表的实体类型配置的所有实体窗体。 <br> **注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果详细信息操作未提供任何实体窗体，则会将其忽略，并且该按钮将不会呈现在实体列表中。 |
|         **高级设置**         |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 记录 ID 查询字符串参数名称 |                                                                    指定用于选择要在选定实体窗体中查看的实体的查询字符串参数的名称。 这应与该实体窗体的记录 ID 查询字符串参数名称中的值相匹配。 此字段的默认值（此处和实体窗体配置中）是 **id**。                                                                     |
|             按钮标签              |                                                                                                                                                                                      替代实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                                                       |
|            按钮工具提示             |                                                                                                                                                             替代用户指向实体列表行中显示的此操作按钮的按钮时显示的工具提示文本。                                                                                                                                                              |

**详细信息对话框高级设置**

|**名称**               |**说明**                                                                                                                         |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 正在加载消息        | 替代在加载对话框时显示的 HTML。                                                                             |
| 标题                  | 替代对话框的标题栏中显示的 HTML。                                                                         |
| 屏幕阅读器取消按钮文本 | 覆盖与对话框的“取消”按钮关联的屏幕阅读器文本。                                                           |
| 大小                   | 指定“详细信息”对话框的大小。 选项是默认、大和小。 默认大小为“大”。 |
| CSS              | 指定将应用于生成的对话框的 CSS 类。                                                            |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的 CSS 类。                                                |

**编辑操作设置**

启用**编辑操作**允许用户查看通过数据绑定到实体列表选定行记录的可编辑实体窗体（如果实体权限已授予“写入”权限）。


|                 姓名                  |                                                                                                                                                                                                             说明                                                                                                                                                                                                             |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|          **基本设置**           |                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|              实体窗体              | 指定将用于编辑选定实体的实体窗体。 此下拉列表中将包含为实体列表的实体类型配置的所有实体窗体。 <br> **注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果编辑操作未提供任何实体窗体，则会将其忽略，并且该按钮将不会呈现在实体列表中。 |
|         **高级设置**         |                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 记录 ID 查询字符串参数名称 |                                                           指定用于选择要在选定实体窗体中编辑的实体的查询字符串参数的名称。 这应与该实体窗体的记录 ID 查询字符串参数名称中的值相匹配。 此字段的默认值（此处和实体窗体配置中）是 **id**。                                                            |
|             按钮标签              |                                                                                                                                                                             替代实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                                              |
|            按钮工具提示             |                                                                                                                                                    替代用户指向实体列表行中显示的此操作按钮的按钮时显示的工具提示文本。                                                                                                                                                     |

**编辑窗体对话框高级设置**

|**名称**               |**说明**                                                                                                                   |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 正在加载消息        | 替代在加载对话框时显示的 HTML。                                                                       |
| 标题                  | 替代对话框的标题栏中显示的 HTML。                                                                   |
| 屏幕阅读器取消按钮文本 | 覆盖与对话框的“取消”按钮关联的屏幕阅读器文本。                                                     |
| 大小                   | 指定“编辑”对话框的大小。 选项是默认、大和小。 默认大小为“大”。 |
| CSS              | 指定将应用于生成的对话框的 CSS 类。                                                      |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的 CSS 类。                                          |

**删除操作设置**

启用**删除操作**允许用户永久删除实体列表中选定行的记录（如果实体权限已授予“删除”权限）。

| 姓名              | 说明                                                                                                                         |
|-------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| **基本设置**    |                                                                                                                                     |
| 无              |                                                                                                                                     |
| **高级设置** |                                                                                                                                     |
| 确认      | 替换当用户激活删除操作时显示的确认 HTML 消息。                                        |
| 按钮标签      | 替代实体列表行中显示的此操作的 HTML 标签。                                                          |
| 按钮工具提示    | 替代用户指向实体列表行中显示的此操作按钮的按钮时显示的工具提示文本。 |

**删除对话框（高级）设置**

|**名称**                 |**说明**                                                                                                                         |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 标题                    | 替代对话框的标题栏中显示的 HTML。                                                                         |
| 主按钮文本      | 覆盖显示在对话框中主（删除）按钮中显示的 HTML。                                                         |
| 关闭按钮文本        | 覆盖显示在对话框中关闭（取消）按钮中显示的 HTML。                                                           |
| 屏幕阅读器取消按钮文本   | 覆盖与对话框的“取消”按钮关联的屏幕阅读器文本。                                                           |
| 大小                     | 指定“删除”对话框的大小。 选项是默认、大和小。 默认大小为默认值。 |
| CSS                | 指定将应用于生成的对话框的 CSS 类。                                                            |
| 标题 CSS 类          | 指定将应用于生成的对话框标题栏的 CSS 类。                                                |
| 主按钮 CSS 类 | 指定将应用于对话框的主（删除）按钮的 CSS 类。                                          |
| 关闭按钮 CSS 类   | 指定将应用于对话框的关闭（取消）按钮的 CSS 类。                                            |

**工作流操作设置**

启用**工作流操作**允许用户对实体列表中选定行的记录执行按需工作流。 您可以向实体列表添加任意数量的工作流操作。


|         姓名          |                                                                                                                                                           说明                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  **基本设置**   |                                                                                                                                                                                                                                                                                                                                 |
|       工作流        | 指定将在用户激活此操作时运行的按需工作流。 <br> **注意**：如果实体列表的实体类型没有工作流，则下拉列表将显示为空。 如果工作流操作未提供任何工作流，则会将其忽略，并且该按钮将不会呈现在实体列表中。 |
|     按钮标签      |                                                                                                                 设置实体列表行中显示的此操作的 HTML 标签。 该设置是必需设置。                                                                                                                 |
| **高级设置** |                                                                                                                                                                                                                                                                                                                                 |
|    按钮工具提示     |                                                                                                  替代用户指向实体列表行中显示的此操作按钮的按钮时显示的工具提示文本。                                                                                                   |

## <a name="securing-entity-lists"></a>保护实体列表

若要保护实体列表，必须为正在为其显示记录的实体配置实体权限，并且将实体列表记录的**启用实体权限**布尔值设置为 true。

保护实体列表的行为将确保仅对访问页面的任何用户显示已为其提供了权限的记录。 实施方法是向正在通过列表显示的模型驱动应用视图添加一个额外的筛选器。 此筛选器将仅筛选出用户通过**读取**权限可访问的记录。

此外，为列表定义的任何操作都将根据记录服从该操作的相应权限。 也就是说，如果您具有记录的编辑权限，将为该记录启用编辑操作。 这同样适用于删除、创建等。 请注意，如果没有可用记录，加载列表时，将显示一条消息来说明这种情况。

但是，优秀的网站设计要求如果用户的角色没有实体的任何权限（即他们始终不应查看任何记录），则根本不应访问页面。 理想情况下，应使用网页访问权限保护页面。

如果已经通过选中**启用实体权限**保护了实体列表，但是希望显示适用于已登录用户的记录级操作，则必须将 **EntityList/ShowRecordLevelActions** 站点设置的值设置为 **true**。 例如，有两位用户：Preston 和 Teddy。 Preston 拥有服务案例实体的所有联系人级访问权限，而 Teddy 则拥有全局读取访问权限。 如果创建实体列表以显示所有服务案例记录，Preston 将看到可对与其联系人有关的记录执行的所有操作（查看、编辑和删除）。 在其他记录中，只能看到**查看**操作。 另一方面，Teddy 只能看到所有记录的**查看**操作。

如果 **EntityList/ShowRecordLevelActions** 站点设置设置为 **false**，并且实体具有多项权限，则将显示所有记录级操作。 但是，当用户尝试执行无权执行的操作时，将显示错误。

## <a name="adding-a-view-details-page"></a>添加视图详细信息页面

通过将详细信息视图的网页查找设置为网页，可以以只读或编辑模式查看网格中列出的记录，具体取决于关联窗体或页面的配置。

此页可以是完全自定义的页面模板，并且可能是使用 Liquid 创建的。 最常见的场景可能是将详细信息页面设置为包含实体列表或 Web 窗体的网页。

需要注意的重点是，网格中列出的每个记录都有详细信息页面的超链接，而该链接中包含命名的查询字符串参数和记录的 ID。 查询字符串参数的名称取决于实体列表上指定的 ID 查询字符串参数名称。 最后需要注意的是，目标详细信息网页也必须注意此查询字符串参数的名称，以便获取查询和加载其数据所需的记录 ID。

![添加视图详细信息页面](../media/add-view-details-page.png "添加视图详细信息页面")  

**使用实体窗体显示详细信息**

若要创建实体窗体，请参阅[实体窗体](entity-forms.md)页面中的说明。

若要确保在实体窗体中加载实体列表中的记录，需要注意下面的重要设置。

实体窗体中的记录 ID 查询字符串参数名称必须与实体列表上的 ID 查询字符串参数名称匹配。

模式可以是编辑或只读，具体取决于您的需要。

**使用 Web 窗体显示详细信息**

若要确保在 Web 窗体中加载实体列表中的记录，需要注意下面的重要设置。

Web 窗体步骤中的主键查询字符串参数名称必须与实体列表上的 ID 查询字符串参数名称匹配。

模式可以是编辑或只读，具体取决于您的需要。

**将详细信息页面用于创建功能**

可将自定义页面、实体窗体或 Web 窗体以同样的方式用于创建功能。 这是在窗体上定义创建操作的备选方法。 不能同时为创建定义创建操作*和*自定义页面：定义自定义操作的优先级更高。

如果为实体列表上的创建查找分派网页，但不通过使用“配置”指定创建操作，将在列表中呈现“创建”按钮；该按钮把用户链接到您已为创建指定的自定义页面。

## <a name="entity-list-filter-configuration"></a>实体列表筛选器配置

在实体列表中添加筛选记录功能非常简单 - 只需启用筛选选项，然后选择要向用户显示的一个或多个筛选器类型。 可以按与用户提供的文本匹配的属性筛选，也可以从一系列选项中进行选择。 甚至可以通过使用“高级查找”，设计您可以想到的几乎任何类型的筛选器。

**启用实体列表筛选器**

在**元数据筛选器**部分中，选中**已启用**复选框。 这将在实体列表显示时向其添加筛选器区域。 至少定义一个筛选器类型之前，此框显示为空。

可以使用“方向”设置定义“筛选器”区域在实体列表上的呈现方式。 默认值为“水平”，将“筛选器”区域在实体列表上方呈现。 “垂直方向”将“筛选器”区域作为框在实体列表左侧呈现。

![元数据筛选器设置](../media/metadata-filter-settings.png "元数据筛选器设置")  

**筛选器类型**

|**筛选器类型**      |**说明**                                                                                                                                                                                                                               |
|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 文本筛选器          | 使用文本框筛选实体列表，以便在给定实体的选定属性中搜索匹配文本。                                                                                                                               |
| 属性筛选器集 | 使用一系列复选框筛选实体列表，其中的每个复选框都尝试将其条件与给定实体的特定属性匹配。                                                                                           |
| 查找集           | 使用一系列复选框筛选实体列表，其中的每个复选框都表示给定实体的一个记录与相关实体的一个记录之间的关系。                                                                         |
| 范围筛选器集     | 与属性筛选器集类似，除了每个复选框可以表示两个条件，而不是一个（例如，大于或等于 0，并且小于 100）。                                                                    |
| 动态选择列表集 | 与在属性筛选器集中选择选择列表值类似。 动态选择列表集不需要您指定充当筛选依据的选择列表选项；相反，将在加载实体列表时生成完整的选项列表。 |
| 动态查找集   | 与查找集类似。 动态查找集不需要您指定充当筛选依据的查找选项；相反，将在加载实体列表时生成完整的选项列表。                                           |
| FetchXML 筛选器      | 使用 FetchXML 筛选条件筛选实体列表。                                                                                                                                                                                     |

**文本筛选器**

文本筛选器向实体列表筛选器区域添加一个文本框，该文本框与实体列表的实体类型的一个属性绑定。 用户应用该筛选器时，实体列表仅显示其选定属性包含该值的记录。

若要添加文本筛选器，请单击 **+ 文本筛选器**。

![添加文本筛选器](../media/add-text-filter.png "添加文本筛选器")  

文本筛选器使用以下属性：

|**名称**     |**说明**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| 属性    | 选定充当筛选依据的实体列表实体类型的属性的名称。 *只有类型为“字符串”的属性才对文本筛选器有效。*                                                                                   |
| 显示名称 | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定属性的名称。 |

**属性筛选器集**

属性筛选器集添加一系列选项来充当实体列表的筛选依据，而这些选项分别绑定到实体列表选定实体类型的单个属性。 用户应用该筛选器时，实体列表仅显示精确匹配至少一个选定选项的记录。

![属性筛选器设置](../media/set-attribute-filter.png "属性筛选器设置")

属性筛选器集使用以下属性：

|**名称**     |**说明**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| 属性    | 选定充当筛选依据的实体列表实体类型的属性的名称。 只有以下类型的属性才对文本筛选器有效：字符串、BigInt、十进制、双精度、整数、货币、选择列表、日期时间和布尔值。
|显示名称 | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定属性的名称。
| 选项​​ |      可充当筛选依据的值的集合。 有关详细信息，请参阅下文。                                                                              |

**属性筛选器集选项**

属性筛选器集通常可以有任意数量的选项，但选择列表和布尔值属性除外。 布尔值属性筛选器集只能有一个或两个选项 &mdash; 一个 true 选项，一个 false 选项。 选择列表属性筛选器集可以为选择列表中的每个可能的值最多有一个选项。

选项具有以下属性：

|**名称**     |**说明**                                                                                                                                                                                  |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 操作员     | 用于筛选结果的比较运算符，如等于、小于等。 选项的运算符列表取决于为筛选器选择的属性类型。 例如，数值（十进制）类型将具有“小于”或“大于”之类运算符，而“字符串”属性则使用“开头是"或”包含“之类运算符。 选择列表和布尔值运算符始终为”等于“。                                                                                                                                               |
| 值        | 用于此筛选条件的实际值。                                                                                                                                                 |
| 显示名称 | 替代”筛选器“框中此选项的显示名称。 默认情况下，这将设置为与值属性相同的值。                                                             |

**查找集**

查找集添加一系列选项来充当实体列表的筛选依据，而这些选项分别绑定到实体列表选定实体类型的相关实体。 用户应用该筛选器时，实体列表仅显示精确匹配至少一个选定相关记录。

![查找集](../media/lookup-set.png "查找集")  

查找集使用以下属性：

|**名称**     |**说明**                                                                                                                                           |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| 关系​​ | 选定充当筛选依据的实体列表实体类型的相关实体的名称。 只有与实体列表选定实体类型之间存在一对多或多对多关系的实体才显示为此筛选器类型的选项。          |
| 显示名称 | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定关系的名称。 |
| 选项​​      | 可充当筛选依据的值的集合。 有关详细信息，请参阅下文。                                                                                 |

**查找集选项**

查找集通常可以有任意数量的选项，但唯一限制是选定相关类型的相关记录数。

选项具有以下属性：

|**名称**     |**说明**                                                                                                                      |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------|
| 值        | 要充当选定相关类型的记录。                                                                                |
| 显示名称 | 替代”筛选器“框中此选项的显示名称。 默认情况下，这将设置为与值属性相同的值。 |

**范围筛选器集**

范围筛选器集向“筛选器”区域添加一系列选项，每个选项有一个或两个条件。 用户应用该筛选器时，实体列表仅显示精确匹配至少一个选定选项的所有条件。

![范围筛选器设置](../media/set-range-filter.png "范围筛选器设置")  

范围筛选器集使用以下属性：

|**名称**     |**说明**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| 属性    | 选定充当筛选依据的实体列表实体类型的属性的名称。 只有以下类型的属性才对文本筛选器有效：字符串、BigInt、十进制、双精度、整数、货币、日期时间。                       |
| 显示名称 | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定属性的名称。 |
| 选项​​      | 可充当筛选依据的值的集合。 有关详细信息，请参阅下文。                                                                              |

**范围筛选器集选项**

范围筛选器集可以有任意数量的选项。 每个选项都将生成一个包含一个或两个子条件的筛选条件，必须同时满足子条件，条件才能成立。

选项具有以下属性：

|**名称**              |**说明**                                                                                                                                                                                |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 运算符 1            | 用于筛选结果的第一个比较运算符，如等于和小于。 选项的运算符列表取决于为筛选器选择的属性类型。 例如，数值（十进制）类型将具有“小于”或“大于”之类运算符，而“字符串”属性则使用“开头是"或”包含“之类运算符。 选择列表和布尔值运算符始终为”等于“。                                                                                                                                             |
| 值 1               | 用于此筛选条件的第一个值。                                                                                                                                                |
| 运算符 2（可选） | 用于筛选结果的第二个比较运算符，如等于和小于。 选项的运算符列表取决于为筛选器选择的属性类型。 例如，数值（十进制）类型将具有“小于”或“大于”之类运算符，而“字符串”属性则使用“开头是"或”包含“之类运算符。 选择列表和布尔值运算符始终为”等于“。                                                                                                                                             |
| 值 2（可选）    | 用于此筛选条件的第二个值。                                                                                                                                               |
| 显示名称          | 替代”筛选器“框中此选项的显示名称。 默认情况下，根据所选运算符和值动态设置此项。                                         |

**动态选择列表集**

动态选择列表集添加一系列充当筛选依据的选项，用于表示指定选择列表字段的所有值。 这与在属性筛选器集中选择选择列表不同中。 在属性筛选器集中，必须指定将可供用户充当筛选依据的一组选项；在动态选择列表集中，您只需指定选择列表字段，而整个选项集将自动提供。 如果需要更高的控制，建议使用属性筛选器集。

![动态选择列表设置](../media/set-dynamic-picklist.png "动态选择列表设置")  

动态选择列表集使用以下选项：

|**名称**     |**说明**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| 属性    | 选定充当筛选依据的实体列表实体类型的选择列表属性的名称。                                                             |
| 显示名称 | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定属性的名称。 |

**动态查找集**

动态查找集添加一系列动态选项来充当实体列表的筛选依据，而这些选项分别绑定到实体列表选定实体类型的相关实体。 用户应用该筛选器时，实体列表仅显示精确匹配至少一个选定相关记录。

这与查找集不同。 在查找集，必须手动指定要充当筛选依据的相关实体。 在动态查找集中，您只需指定要充当筛选依据的关系，然后将根据指定的相关实体视图生成选项列表。

![动态查找设置](../media/set-dynamic-lookup.png "动态查找设置")  

动态查找集使用以下选项：

|**名称**                      |**说明**                                                                                                                                                                      |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 关系​​                  | 选定充当筛选依据的实体列表实体类型的相关实体的名称。 只有与实体列表选定实体类型之间存在一对多或多对多关系的实体才显示为此筛选器类型的选项。                                     |
| 视图​​                          | 要用作要充当筛选依据的实体的动态列表源的视图（保存的查询）。                                                                                              |
| 标签列                  | 视图中提供每个实体的“名称”值的字段。                                                                                                                    |
| 筛选查找关系 | 指定“关系”字段指定的实体与已登录用户之间的关系。 如果“关系”字段指定的实体也与某个联系人之间有关系，可将筛选器选项列表缩小到与已登录用户有关的实体。  |
| 显示名称                  | 显示实体列表时替代筛选器的标签。 默认情况下，这将自动设置为选定关系的名称。                            |

**FetchXML 筛选器**

范围筛选器可以创建简单的文本框筛选器（如文本筛选器），也可以创建一组选项（如其他筛选器类型）。 它允许您使用 FetchXML 手动为实体列表创建几乎任意类型的筛选器。

![FetchXML 筛选器设置](../media/set-fetchxml-filter.png "FetchXML 筛选器设置")

FetchXML 筛选器仅使用一个属性：

|**名称** |**说明**                            |
|----------|--------------------------------------------|
| FetchXML | 表示筛选器的 XML 语句。 |

## <a name="entity-list-map-view"></a>实体列表地图视图

通过实体列表，可以启用和配置数据的地图视图，这由具有用于查找地址附近位置的搜索功能的 [!INCLUDE[pn-bing](../../../includes/pn-bing.md)] 地图提供支持。 通过为记录填充经纬度坐标值并指定此部分中列出的必要配置选项，可以将记录呈现为地图中的图钉。 搜索时排除所有没有精度或维度值的记录。 首次加载页面将显示默认中心精度和默认中心维度坐标中“距离值”字段初始值（单位为英里或公路，具体取决于指定的距离单位）内的所有记录。 使用地图视图时，将忽略指定的视图，并向数据集应用距离查询，以便返回可用地图表示的结果。
>[!Note] 
>该选项在德国 Sovereign 云环境中不受支持。 “地图视图”部分在此环境中不显示。


## <a name="entity-list-calendar-view"></a>实体列表日历视图

实体列表日历视图可用于将实体列表呈现为日历，并将每个单独的记录配置为充当单个事件。

若要使用日历显示记录，记录中需要至少包含一个日期字段。 若要使事件具有精确的开始和结束时间，需要设置相应字段，以此类推。 假设配置了这些字段，则将在门户中显示实体列表日历视图。

## <a name="entity-list-odata-feeds"></a>实体列表 OData 数据源

如果启用，可以将实体发布到 OData 数据源。 OData 协议是用于通过 RESTful Web 服务与数据交互的应用程序级协议。 此数据源中的数据可以使用 Web 浏览器查看，供客户端 Web 应用程序使用，或导入到 [!INCLUDE[pn-excel-short](../../../includes/pn-excel-short.md)] 中。

> [!Note]
> 发布的 OData 数据源匿名，并且没有任何授权检查；因此，切勿为不适合匿名访问门户的数据启用 oData 数据源。

## <a name="enhanced-view-filter-for-entity-lists"></a>实体列表的增强视图筛选器

如果要保护记录，可使用实体权限，但是如果要保护记录，并且希望仅提供筛选器来充当与当前门户用户有关的筛选器选项集的一部分，则可使用实体列表功能。 此功能支持在任何深度筛选当前用户、用户的父帐户或网站。 只需构建视图筛选器以匹配任何单个联系人记录，因为代码将在运行时把其值替换为实际值 &mdash; 无需为“筛选条件”部分中的字段分派值。

- 此控件将查找其中的 uitype="contact" 的所有条件元素，并将值设置为当前门户用户的联系人 ID 实际值。
- 此控件将查找其中的 uitype="account" 的所有条件元素，并将值设置为当前门户用户的父帐户 ID 实际值。
- 此控件将查找其中的 uitype="adx_website" 的所有条件元素，并将值设置为当前网站 ID 实际值。

示例视图筛选条件

下图显示分配给筛选条件的任意联系人，该联系人刚好是存根“虚拟”联系人，但是可以是任何联系人记录。 此记录的 ID 将替换为查看页面的用户的 ID 实际值。 如果用户未登录，则不返回任何记录。 这样就可以基于上下文中的用户和网站更灵活地筛选数据。

> [!NOTE]
> 如果按门户用户的联系人或父帐户筛选，则建议将[网页访问控制规则](webpage-access-control.md)关联到网页，以便强制用户登录。 您将创建一个 [Web 角色](create-web-roles.md)，并已选中“已通过身份验证的用户角色”。 创建具有“限制读取”权限的网页访问控制规则，然后关联 Web 角色。 这样会强制用户必须登录才能查看页面，从而可以相应填写数据。

### <a name="see-also"></a>另请参阅

[配置门户](configure-portal.md)  
[重定向到门户的新 URL](add-redirect-url.md)  
