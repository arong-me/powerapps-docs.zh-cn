---
title: 添加网页以在门户上呈现记录列表 |MicrosoftDocs
description: 有关添加和配置实体列表以在门户上呈现记录列表的说明。
author: sbmjais
manager: shujoshi
ms.service: powerapps
ms.topic: conceptual
ms.custom: ''
ms.date: 11/04/2019
ms.author: shjais
ms.reviewer: ''
ms.openlocfilehash: 1ab175f69fdcf292185fd96cb176045dccc3a70b
ms.sourcegitcommit: d9cecdd5a35279d78aa1b6c9fc642e36a4e4612c
ms.translationtype: MT
ms.contentlocale: zh-CN
ms.lasthandoff: 11/04/2019
ms.locfileid: "73552833"
---
# <a name="about-entity-lists"></a>关于实体列表

实体列表是一种数据驱动的配置，可用于添加一个网页，该网页将呈现一系列记录，而无需开发人员在门户中显示网格。 通过使用实体列表，你可以公开用于在门户上显示的记录。

如果记录数大于指定的页面大小，则网格支持排序并将分页。 如果已指定 "**详细信息视图**" 网页，则每个记录都将包含一个指向该页面的链接，并且该记录的 id 将与 Id 查询字符串参数名称一起追加到查询字符串。 实体列表还支持多个视图。 如果已指定多个视图，则将呈现一个下拉列表，以允许用户在不同视图之间切换。

还可以通过当前门户用户、当前门户用户的父客户帐户和当前门户网站来筛选数据。 如果筛选条件**门户用户属性**和**帐户属性**的值都存在，门户将呈现一个下拉列表，以允许用户查看其自己的（我的）数据或其父客户帐户的数据。

## <a name="add-an-entity-list-to-your-portal"></a>将实体列表添加到门户

实体列表包含与网页的关系，以及用于控制门户内记录列表初始化的各种属性。 与网页的关系允许动态检索网站中给定页面节点的列表定义。 若要查看现有实体视图或创建新的实体视图，请 > **实体列表**中转到**门户**。

> [!Note]
> - 实体列表必须与给定网站中的网页相关联，才能在该网站中查看该列表。
> - 实体列表中不支持多选选项集。

可以通过选择最左侧菜单中**相关**导航链接中列出的 "**网页**" 链接来查看与实体列表关联的网页。 创建实体列表时，第一步是在门户中选择要为其呈现列表的实体。 然后选择一个或多个模型驱动的应用视图进行呈现。

创建或编辑网页时，可以在网页表单上提供的 "查找" 字段中指定实体列表。 页面模板通常是页面模板，但可以是为内容设计的其他几个模板之一，因为主模板包含确定是否应呈现实体列表的必要逻辑。

## <a name="entity-list-attributes-and-relationships"></a>实体列表属性和关系

|              名称              |                                                                                                                                                                                        描述                                                                                                                                                                                         |
|--------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|              名称              |                                                                                                                                                                记录的描述性名称。 此字段是必需的。                                                                                                                                                                 |
|          实体名称           |                                                                                                                                               将从中加载已保存查询视图的实体的名称。 此字段是必需的。                                                                                                                                               |
|              显示              |                                                                          要呈现的目标实体的已保存查询视图。 此字段是必需的。 如果已指定多个视图，则网页将包含一个下拉列表，以允许用户在不同视图之间切换。                                                                           |
|           页面大小            |                                                                                                                                            一个整数值，该值指定每页的记录数。 此字段是必需的。 默认值：10                                                                                                                                             |
|   详细信息视图的网页    |                                                                                                        可以链接到每个记录的可选网页。 ID 查询字符串参数名称和记录 ID 将追加到此网页的 URL 的查询字符串中。                                                                                                        |
|      详细信息按钮标签      |                     为 "详细信息视图" 按钮显示的文本，如果已指定 "**详细信息视图**" 网页。 默认值：查看详细信息 <br>**注意**：对于为 Common Data Service 环境安装和启用的每个语言包，都可以使用字段以关联的语言输入消息。                      |
|      用于创建的网页       |                                                                                                                                                             将作为 "创建" 按钮的目标的可选网页。                                                                                                                                                              |
|      创建按钮标签       |                              为 "创建" 按钮显示的文本，如果已指定 "**创建**网页"。 默认：创建 <br>**注意**：对于为 Common Data Service 环境安装和启用的每个语言包，将可以使用 "关联语言" 字段输入消息。                              |
| ID 查询字符串参数名称 |                                                                                                                                           "详细信息视图" 网页的 URL 的查询字符串中提供的参数名称。 默认值： id                                                                                                                                           |
|        空列表文本         |  **弃用**。  没有记录时显示的消息。<br>**注意**：对于为 Common Data Service 环境安装和启用的每个语言包，都可以使用字段以关联的语言输入消息。                                                           |
|     门户用户属性      |                                                                                      主要实体上的一个可选查找属性，表示可应用当前用户的 ID 的门户用户记录，以筛选列表中呈现的数据。                                                                                      |
|       帐户属性        |                                                                                       主要实体上的一个可选查找属性，表示一个帐户记录，当前用户联系人的父客户帐户值可以应用于该帐户，以筛选列表中呈现的数据。                                                                                       |
|       网站属性        |                                                                                                          主要实体上的一个可选查找属性，它表示可应用当前网站 ID 的网站，以筛选列表中呈现的数据。                                                                                                          |
|         搜索已启用         | 一个可选的布尔值，指示是否应启用搜索。 将呈现一个文本框，以允许用户快速搜索记录。 使用星号（\*）通配符搜索部分文本。 搜索将视图中每列的或条件筛选器附加到视图的现有预定义筛选条件，以便查询和返回生成的记录。 |
|    搜索占位符文本     |                                                                                                                                                      一个可选字符串，用作初始加载时在文本框中显示的标签。                                                                                                                                                       |
|      搜索工具提示文本       |                                                                                                                                             一个可选字符串，用作用户指向 "**搜索**" 文本框时显示的工具提示。                                                                                                                                              |
|                                |                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="add-custom-javascript"></a>添加自定义 Javascript

窗体上的 "选项" 选项卡包含一个可以输入自定义 [!INCLUDE[pn-javascript](../../../includes/pn-javascript.md)]的文本区域;如果页面包含 jQuery library，还可以在此处使用。 脚本块将添加到页面底部，就在页面的结束窗体标记之前。

![自定义 JavaScript 示例](../media/custom-javascript-example.png "自定义 JavaScript 示例")  

此列表以异步方式获取其数据，当它完成时，将触发事件 `loaded` 自定义 [!INCLUDE[pn-javascript](../../../includes/pn-javascript.md)] 可以侦听该事件，并对网格中的项执行一些操作。 下面的代码是一个简单的示例：
```
$(document).ready(function (){
$(".entitylist.entity-grid").on("loaded", function () {
$(this).children(".view-grid").find("tr").each(function (){
// do something with each row
$(this).css("background-color", "yellow");
});
});
}); 
```

查找特定的属性字段并获取其值，以可能修改该值的呈现。 下面的代码获取包含 `accountnumber` 属性的值的每个表单元格。 将 `accountnumber` 替换为适用于实体和视图的属性。
```
$(document).ready(function (){
   $(".entitylist.entity-grid").on("loaded", function () {
      $(this).children(".view-grid").find("td[data-attribute='accountnumber']").each(function (i, e){
         var value = $(this).data(value);
         // now that you have the value you can do something to the value
      });
   });
});
```
## <a name="entity-list-configuration"></a>实体列表配置

您可以轻松地为实体列表中的记录启用和配置操作（创建、编辑、删除等）。 还可以覆盖默认标签、大小和其他属性，以便按所需的方式显示实体列表。

可在实体列表窗体的 "配置" 部分找到这些设置。 默认情况下，仅显示**基本设置**。 选择 "**高级设置**" 以查看其他设置。

![配置实体列表](../media/configure-entitylist.png "配置实体列表")  

**属性**

|名称                   |描述|
|---------------------------|-----------|
|**基本设置**         |   |
| 查看操作              |用于添加适用于实体集的操作的操作按钮，并将显示在网格上方。 可用的操作包括： <ul><li>创建</li> <li>Download</li></ul> 选择这些选项之一会显示该操作的配置区域。|
| 项操作             |使用可为适用于单个记录的操作添加操作按钮，并将为网格中的每一行显示该操作按钮，前提是实体权限已授予适当的权限。 通常可以使用以下操作：<ul><li>详细信息</li><li>编辑</li><li>Delete</li><li>Workflow</li><li>启用</li><li>禁止</li></ul> 选择这些选项之一会显示该操作的配置区域。 有关每个操作的详细信息，请参阅下文。 此外，某些实体具有特定的操作，这些操作可用于每个实体：<ul><li>计算机会值（机会）</li><li>取消案例操作（事件）</li><li>关闭（解决） Case 操作（事件）</li><li>将引号转换为 Order （Quote）</li><li>将订单转换为发票（salesorder）</li><li>从机会生成报价单（机会）</li><li>失去机会操作（机会）</li><li>Win 机会操作（机会）</li><li>重新打开 Case 操作（事件）</li><li>设置保持机会（机会）</li></ul>|
| 重写列特性|用于重写网格中各个列的显示设置。<ul><li>属性：要替代的列的逻辑名称</li><li>显示名称：新列标题以替代默认值</li><li>Width：列的宽度（以百分比或像素为单位），用于重写默认值。 另请参阅网格列宽样式</li></ul> 若要覆盖列上的设置，请选择 " **+ 列**" 并填写详细信息。|
|**高级设置**      |  |
| 正在加载消息           |覆盖在加载网格时显示的默认 HTML 消息。|
| 错误消息             |重写在加载网格时出现错误时显示的默认 HTML 消息。|
| 拒绝访问消息     |覆盖当用户没有足够的实体权限查看实体列表时显示的默认 HTML 消息。|
| 空消息             |重写在网格不包含数据时显示的 HTML 消息。|
| 详细信息窗体对话框       |控制用户激活详细信息操作时出现的对话框的设置。|
| 编辑窗体对话框          |控制用户激活编辑操作时显示的对话框的设置。|
| "创建窗体" 对话框        |控制用户激活创建操作时出现的对话框的设置。|
| 删除对话框             |控制用户激活 "删除" 操作时出现的对话框的设置。|
| 错误对话框              |控制在执行任何操作的过程中出现错误时显示的对话框的设置。|
| CSS 类                 |指定将应用于包含整个网格区域（包括网格和操作按钮）的 HTML 元素的 CSS 类。|
| 网格 CSS 类            |指定将应用于实体列表的 HTML \<table\> 元素的 CSS 类。|
| 网格列宽样式   |配置是否以**像素**或**百分比**指定覆盖列属性中的**宽度**值。|

**常规操作设置**

通常情况下，实体操作具有可配置的设置。 在所有情况下，这是为了在自定义方面提供更多选项，并且不需要这些字段。 只需添加操作，即可在门户中执行操作，前提是实体权限已授予适当的权限。

通常，你可以为每个操作配置相应的对话框，仅当你选择 "**要求确认**" 时才会显示该对话框。


| 名称                   | 描述                                                                                                                                                                                                                   |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **基本设置**         |                                                                                                                                                                                                                               |
| 是否需要确认？ | 确定在选择该操作时确认是否将提示用户确认。                                                                                                                                 |
| **高级设置**      |                                                                                                                                                                                                                               |
| 证实           | 覆盖用户激活操作时显示的确认 HTML 消息。                                                                                                                                         |
| 按钮标签           | 覆盖实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                    |
| 按钮工具提示         | 重写当用户指向实体列表行中显示的此操作的按钮时显示的工具提示文本。                                                                                           |
| Button CSS 类       | 向按钮添加 CSS 类。                                                                                                                                                      |
| 重定向到网页    | 完成操作后，某些操作（并非全部）允许重定向。 强烈建议用于删除操作，在大多数其他情况下是可选的，你可以在操作完成时选择要重定向到的网页。 |
| 重定向 URL           | "**重定向到网页**" 选项的替代选项&mdash;允许重定向到特定的 URL。                                                                                                                                   |

**"常规" 对话框高级设置**

|**名称**                 |**Description**                                                                                                                         |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 标题                    | 重写在对话框的标题栏中显示的 HTML。|                                                                         
| 主按钮文本      | 覆盖出现在对话框上的 "主要（删除）" 按钮中的 HTML。                                                         |
| 关闭按钮文本        | 替代对话框上的 "关闭" （"取消"）按钮中显示的 HTML。                                                           |
| 消除按钮 Sr 文本   | 替代与对话框的 "关闭" 按钮相关联的屏幕阅读器文本。                                                           |
| 大小                     | 指定 "删除" 对话框的大小。 选项包括 "默认"、"大" 和 "小"。 默认大小为默认值。 |
| CSS 类                | 指定将应用于生成的对话框的一个或哪些类。                                                            |
| 磁贴 CSS 类           | 指定将应用于生成的对话框标题栏的一个或一些类。                                                |
| 主按钮 CSS 类 | 指定将应用于对话框的 "主" （删除）按钮的一个或一些类。                                          |
| 关闭按钮 CSS 类   | 指定将应用于对话框的 "关闭" 按钮（"取消"）的一个或一些类。                                            |

**创建操作设置**

如果启用 "**创建" 操作**，则会在实体列表上方呈现一个按钮，选中此选项时，将打开一个对话框，其中包含一个实体窗体，用户可以使用该实体窗体创建新记录，前提是 "创建" 特权已由实体权限授予。

| 名称               | 描述                          |
|--------------------|--------------------------------------|
| **基本设置**     |                                                                                                                                                                       |
| 实体窗体     | 指定将用于创建新记录的实体窗体。 下拉列表将包括为实体列表的实体类型配置的所有实体窗体。 <br>**注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果没有为创建操作提供实体窗体，则该窗体将被忽略，并且不会在实体列表中呈现该按钮。 |
| **高级设置**          |                                                                                                                                                                       |
| 按钮标签                                                                                                                                                                                                                 | 覆盖列表上方的 "创建操作" 按钮中显示的 HTML 标签。                                                                                        |
| 按钮工具提示                                                                                                                                                                                                               | 重写当用户指向 "创建操作" 按钮时显示的工具提示文本。                                                                         |

**"创建窗体" 对话框高级设置**

|**名称**               |**Description**                                                                                                                                 |
|------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------|
| 正在加载消息        | 覆盖在加载对话框时显示的消息。                                                                                  |
| 标题                  | 重写在对话框的标题栏中显示的 HTML。                                                                                  |
| 消除按钮 Sr 文本 | 替代与对话框的 "关闭" 按钮相关联的屏幕阅读器文本。                                                                   |
| 大小                   | 指定 "创建窗体" 对话框的大小。 选项包括 "默认"、"大" 和 "小"。 默认大小为大。 |
| CSS 类              | 指定将应用于生成的对话框的一个或哪些类。                                                                    |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的一个或一些类。                                                        |

**下载操作设置**

启用**下载操作**将在实体列表上方呈现一个按钮，选择该按钮时，会将列表中的数据下载到 [!INCLUDE[pn-excel-short](../../../includes/pn-excel-short.md)] （.xlsx）文件中。

| 名称              | 描述                                                                                        |
|-------------------|----------------------------------------------------------------------------------------------------|
| **基本设置**    |                                                                                                    |
| 内容              |                                                                                                    |
| **高级设置** |                                                                                                    |
| 按钮标签      | 覆盖实体列表上方 "下载操作" 按钮中显示的 HTML 标签。            |
| 按钮工具提示    | 重写当用户指向 "下载操作" 按钮时显示的工具提示文本。 |

**详细信息操作设置**

启用**详细信息操作**后，用户可以查看实体列表中选定行的只读实体窗体。


|                 名称                  |                                                                                                                                                                                                                      描述                                                                                                                                                                                                                      |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|          **基本设置**           |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
|              实体窗体              | 指定将用于查看所选实体的详细信息的实体窗体。 下拉列表将包括为实体列表的实体类型配置的所有实体窗体。 <br> **注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果没有为详细信息操作提供实体窗体，则该窗体将被忽略，并且不会在实体列表中呈现该按钮。 |
|         **高级设置**         |                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| 记录 ID 查询字符串参数名称 |                                                                    指定查询字符串参数的名称，该参数将用于在所选实体窗体中选择要查看的实体。 这应与该实体窗体的记录 ID 查询字符串参数名称中的值匹配。 此字段的默认值（在此处和实体窗体配置中）为**id**。                                                                     |
|             按钮标签              |                                                                                                                                                                                      覆盖实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                                                       |
|            按钮工具提示             |                                                                                                                                                             重写当用户指向实体列表行中显示的此操作的按钮时显示的工具提示文本。                                                                                                                                                              |

**"详细信息" 对话框高级设置**

|**名称**               |**Description**                                                                                                                         |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 正在加载消息        | 重写在加载对话框时显示的 HTML。                                                                             |
| 标题                  | 重写在对话框的标题栏中显示的 HTML。                                                                         |
| 消除按钮 Sr 文本 | 替代与对话框的 "关闭" 按钮相关联的屏幕阅读器文本。                                                           |
| 大小                   | 指定 "详细信息" 对话框的大小。 选项包括 "默认"、"大" 和 "小"。 默认大小为大。 |
| CSS 类              | 指定将应用于生成的对话框的一个或哪些类。                                                            |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的一个或一些类。                                                |

**编辑操作设置**

通过启用 "**编辑" 操作**，用户可以查看与实体列表中所选行的记录进行数据绑定的可编辑实体窗体，前提是已通过实体权限授予写入权限。


|                 名称                  |                                                                                                                                                                                                             描述                                                                                                                                                                                                             |
|---------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|          **基本设置**           |                                                                                                                                                                                                                                                                                                                                                                                                                                     |
|              实体窗体              | 指定将用于编辑所选实体的实体窗体。 下拉列表将包括为实体列表的实体类型配置的所有实体窗体。 <br> **注意**：如果实体列表的实体类型没有实体窗体，则下拉列表将显示为空。 如果没有为编辑操作提供实体窗体，则该窗体将被忽略，并且不会在实体列表中呈现该按钮。 |
|         **高级设置**         |                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| 记录 ID 查询字符串参数名称 |                                                           指定将用于在所选实体窗体中选择要编辑的实体的查询字符串参数的名称。 这应与该实体窗体的记录 ID 查询字符串参数名称中的值匹配。 此字段的默认值（在此处和实体窗体配置中）为**id**。                                                            |
|             按钮标签              |                                                                                                                                                                             覆盖实体列表行中显示的此操作的 HTML 标签。                                                                                                                                                                              |
|            按钮工具提示             |                                                                                                                                                    重写当用户指向实体列表行中显示的此操作的按钮时显示的工具提示文本。                                                                                                                                                     |

**"编辑表单" 对话框高级设置**

|**名称**               |**Description**                                                                                                                   |
|------------------------|-----------------------------------------------------------------------------------------------------------------------------------|
| 正在加载消息        | 重写在加载对话框时显示的 HTML。                                                                       |
| 标题                  | 重写在对话框的标题栏中显示的 HTML。                                                                   |
| 消除按钮 Sr 文本 | 替代与对话框的 "关闭" 按钮相关联的屏幕阅读器文本。                                                     |
| 大小                   | 指定编辑对话框的大小。 选项包括 "默认"、"大" 和 "小"。 默认大小为大。 |
| CSS 类              | 指定将应用于生成的对话框的一个或哪些类。                                                      |
| 标题 CSS 类        | 指定将应用于生成的对话框标题栏的一个或一些类。                                          |

**删除操作设置**

启用 "**删除" 操作**后，用户可以从实体列表中永久删除所选行的记录，前提是 "删除" 权限已被实体权限授予。

| 名称              | 描述                                                                                                                         |
|-------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| **基本设置**    |                                                                                                                                     |
| 内容              |                                                                                                                                     |
| **高级设置** |                                                                                                                                     |
| 证实      | 覆盖用户激活 "删除" 操作时显示的确认 HTML 消息。                                        |
| 按钮标签      | 覆盖实体列表行中显示的此操作的 HTML 标签。                                                          |
| 按钮工具提示    | 重写当用户指向实体列表行中显示的此操作的按钮时显示的工具提示文本。 |

**"删除" 对话框（高级）设置**

|**名称**                 |**Description**                                                                                                                         |
|--------------------------|-----------------------------------------------------------------------------------------------------------------------------------------|
| 标题                    | 重写在对话框的标题栏中显示的 HTML。                                                                         |
| 主按钮文本      | 覆盖出现在对话框上的 "主要（删除）" 按钮中的 HTML。                                                         |
| 关闭按钮文本        | 替代对话框上的 "关闭" （"取消"）按钮中显示的 HTML。                                                           |
| 消除按钮 Sr 文本   | 替代与对话框的 "关闭" 按钮相关联的屏幕阅读器文本。                                                           |
| 大小                     | 指定 "删除" 对话框的大小。 选项包括 "默认"、"大" 和 "小"。 默认大小为默认值。 |
| CSS 类                | 指定将应用于生成的对话框的一个或哪些类。                                                            |
| 标题 CSS 类          | 指定将应用于生成的对话框标题栏的一个或一些类。                                                |
| 主按钮 CSS 类 | 指定将应用于对话框的 "主" （删除）按钮的一个或一些类。                                          |
| 关闭按钮 CSS 类   | 指定将应用于对话框的 "关闭" 按钮（"取消"）的一个或一些类。                                            |

**工作流操作设置**

启用**工作流操作**允许用户根据实体列表中所选行的记录运行按需工作流。 您可以向实体列表中添加任意数量的工作流操作。


|         名称          |                                                                                                                                                           描述                                                                                                                                                           |
|-----------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  **基本设置**   |                                                                                                                                                                                                                                                                                                                                 |
|       Workflow        | 指定用户激活此操作时将运行的按需工作流。 <br> **注意**：如果实体列表的实体类型没有工作流，则下拉列表将显示为空。 如果没有为工作流操作提供工作流，它将被忽略，并且不会在实体列表中呈现该按钮。 |
|     按钮标签      |                                                                                                                 设置在实体列表行中显示的此操作的 HTML 标签。 此设置是必需的。                                                                                                                 |
| **高级设置** |                                                                                                                                                                                                                                                                                                                                 |
|    按钮工具提示     |                                                                                                  重写当用户指向实体列表行中显示的此操作的按钮时显示的工具提示文本。                                                                                                   |

## <a name="securing-entity-lists"></a>保护实体列表

若要保护实体列表，必须为要显示其记录的实体配置实体权限，并将实体列表记录上的 "**启用实体权限**" 布尔值设置为 "true"。

保护实体列表的行为将确保，对于访问该页面的任何用户，只会显示他们有权访问的记录。 这是通过将附加筛选器添加到通过列表呈现的模型驱动应用视图来实现的。 此筛选器将仅筛选可通过**读取**权限访问用户的记录。

此外，为列表定义的所有操作都将遵循针对每个记录的该操作的相应权限。 也就是说，如果您对某一记录具有编辑权限，则将为该记录启用 "编辑" 操作。 这同样适用于删除、创建等。 请注意，如果没有任何记录可用，则在加载列表时，将显示一条消息，指示这种情况。

但是，良好的网站设计要求，如果某个用户不在对该实体具有任何权限的角色中（即，在这种情况下，他们将看不到任何记录），他们根本就不能访问该页面。 理想情况下，应使用网页访问权限来保护页面。

## <a name="adding-a-view-details-page"></a>添加视图详细信息页

通过将详细信息视图查找的网页设置为网页，可根据关联窗体或页面的配置，将网格中列出的记录的详细信息视为只读或编辑。

此页面可以是完全自定义的页面模板，可能使用液体创建。 最常见的情况是，"详细信息" 页可能是包含实体窗体或 Web 窗体的网页。

需要注意的重要一点是：网格中列出的每条记录都有一个指向详细信息页的超链接，并且该链接将包含一个具有记录 ID 的命名查询字符串参数。 查询字符串参数的名称取决于在实体列表中指定的 ID 查询字符串参数名称。 要注意的最后一点是，目标详细信息网页还必须知道此查询字符串参数的名称，以获取查询和加载其数据所需的记录的 ID。

![添加视图详细信息页](../media/add-view-details-page.png "添加视图详细信息页")  

**使用实体窗体显示详细信息**

若要创建实体窗体，请参阅[实体窗体](entity-forms.md)页上的说明。

下面是要注意的重要设置，以确保在实体窗体中加载实体列表中的记录。

实体窗体上的记录 ID 查询字符串参数名称必须与实体列表上的 ID 查询字符串参数名称匹配。

模式可以为 "编辑" 或 "只读"，具体取决于你的需求。

**使用 Web 窗体显示详细信息**

下面是要注意的重要设置，确保已在 Web 窗体中加载实体列表中的记录。

Web 窗体步骤的主键查询字符串参数名称必须与实体列表上的 ID 查询字符串参数名称匹配。

模式可以为 "编辑" 或 "只读"，具体取决于你的需求。

**使用 Create 函数的详细信息页**

您可以使用与 Create 函数相同的方式来使用自定义页、实体窗体或 Web 窗体。 这是在窗体上定义创建操作的替代方法。 不能同时定义创建操作*和*用于创建的自定义页：定义自定义操作优先。

如果为实体列表中的 "创建查找" 分配了一个网页，但未使用配置指定 "创建" 操作，则会在该列表中呈现 "创建" 按钮;此按钮会将用户链接到您为创建而指定的自定义页面。

## <a name="entity-list-filter-configuration"></a>实体列表筛选器配置

添加筛选实体列表中记录的功能非常简单：只需启用筛选选项，然后选择一个或多个要向用户显示的筛选器类型。 可以按与用户提供的文本匹配的属性进行筛选，也可以从一系列选项中进行选择。 甚至可以使用 "高级查找" 设计几乎任何类型的筛选器。

**启用实体列表筛选器**

在 "元数据筛选器" 部分中，选中 "启用" 复选框。 这会在显示时将筛选区域添加到实体列表。 在定义了至少一个筛选器类型之前，此框将显示为空。

您可以通过使用方向设置来定义实体列表中筛选区域的呈现方式。 默认情况下，水平呈现实体列表上方的筛选器区域。 垂直方向将筛选区域呈现为实体列表左侧的框。

![元数据筛选器设置](../media/metadata-filter-settings.png "元数据筛选器设置")  

**筛选器类型**

|**筛选器类型**      |**Description**                                                                                                                                                                                                                               |
|----------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 文本筛选器          | 筛选实体列表，方法是使用文本框在给定实体的选定属性中搜索匹配文本。                                                                                                                               |
| 特性筛选器集 | 使用一系列复选框筛选实体列表，每个复选框尝试将其条件与给定实体的特定属性进行匹配。                                                                                           |
| 查找集           | 使用一系列复选框筛选实体列表，其中每个复选框均表示给定实体的记录与相关实体的记录之间的关系。                                                                         |
| 范围筛选器集     | 与属性筛选器集类似，不同的是，每个复选框可以表示两个条件，而不是一个（例如，大于或等于0且小于100）。                                                                    |
| 动态选择列表集 | 类似于选择属性筛选器集上的选择列表值。 动态选择列表集无需指定要按其进行筛选的选择列表选项;而是在加载实体列表时生成选项的完整列表。 |
| 动态查找集   | 类似于查找集。 动态查找集无需指定要筛选的查找选项;而是在加载实体列表时生成选项的完整列表。                                           |
| FetchXML 筛选器      | 使用 FetchXML 筛选条件筛选实体列表。                                                                                                                                                                                     |

**文本筛选器**

文本筛选器将向实体列表筛选器区域添加一个文本框，该文本框绑定到实体列表的实体类型的属性。 用户应用筛选器时，实体列表仅显示其所选属性包含值的记录。

若要添加文本筛选器，请选择 " **+ 文本筛选器**"。

![添加文本筛选器](../media/add-text-filter.png "添加文本筛选器")  

文本筛选器使用以下属性：

|**名称**     |**Description**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| Attribute    | 要按其进行筛选的实体列表的所选实体类型上的属性的名称。 *只有类型字符串的属性对文本筛选器有效。*                                                                                   |
| 显示名称 | 显示实体列表时，重写筛选器的标签。 默认情况下，此属性将自动设置为所选属性的名称。 |

**特性筛选器集**

特性筛选器集添加了一系列选项来筛选实体列表，并将其绑定到实体列表所选实体类型的单个属性。 用户应用筛选器时，实体列表仅显示与至少一个选定选项完全匹配的记录。

![特性筛选器设置](../media/set-attribute-filter.png "特性筛选器设置")

属性筛选器集使用以下属性：

|**名称**     |**Description**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| Attribute    | 要按其进行筛选的实体列表的所选实体类型上的属性的名称。 只有具有以下类型的属性对文本筛选器有效： String、BigInt、Decimal、Double、Integer、Money、选择列表、日期时间和布尔值。
|显示名称 | 显示实体列表时，重写筛选器的标签。 默认情况下，此属性将自动设置为所选属性的名称。
| 选项 |      要作为筛选依据的可能值的集合。 有关更多详细信息，请参阅下文。                                                                              |

**属性筛选器 Set 选项**

特性筛选器集通常可以有任意数量的选项，其中的选择列表和布尔属性除外。 布尔属性筛选器集只能有一个或两个选项&mdash;一个 true 选项和一个 false 选项。 对于选择列表中的每个可能值，选择列表属性筛选器集最多只能有一个选项。

选项具有以下属性：

|**名称**     |**Description**                                                                                                                                                                                  |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 操作员     | 用于筛选结果的比较运算符，例如等于、小于等。 选项的运算符列表将取决于为筛选器选择的属性的类型。 例如，数值（Decimal）类型将具有小于或大于的运算符，而字符串属性将使用以或 Contains 开头的运算符。 选择列表和布尔运算符始终相等。                                                                                                                                               |
| Value        | 此筛选条件使用的实际值。                                                                                                                                                 |
| 显示名称 | 在 "筛选器" 框中覆盖此选项的显示名称。 默认情况下，此值将设置为与 Value 属性相同的值。                                                             |

**查找集**

查找集添加了一系列选项来筛选实体列表，并将相关实体绑定到实体列表所选的实体类型。 当用户应用筛选器时，实体列表只显示与至少一个所选相关记录完全匹配的那些记录。

![查找集](../media/lookup-set.png "查找集")  

查找集使用以下属性：

|**名称**     |**Description**                                                                                                                                           |
|--------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| 关系 | 要作为筛选依据的实体列表的所选实体类型的相关实体的名称。 只有与实体列表的选定实体类型具有一对多或多对多关系的实体才会显示为此筛选器类型的选项。          |
| 显示名称 | 显示实体列表时，重写筛选器的标签。 默认情况下，此值将自动设置为所选关系的名称。 |
| 选项      | 要作为筛选依据的可能值的集合。 有关更多详细信息，请参阅下文。                                                                                 |

**查找设置选项**

通常，查找集可以有任意数量的选项，只限制是所选相关类型的相关记录数。

选项具有以下属性：

|**名称**     |**Description**                                                                                                                      |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------|
| Value        | 要筛选的所选相关类型的记录。                                                                                |
| 显示名称 | 在 "筛选器" 框中覆盖此选项的显示名称。 默认情况下，此值将设置为与 Value 属性相同的值。 |

**范围筛选器集**

范围筛选器集向筛选器区域添加一系列选项，每个选项都有一个或两个条件。 用户应用筛选器时，实体列表仅显示与至少一个选定选项上的所有条件完全匹配的记录。

![范围筛选器设置](../media/set-range-filter.png "范围筛选器设置")  

范围筛选器集使用以下属性：

|**名称**     |**Description**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| Attribute    | 要按其进行筛选的实体列表的所选实体类型上的属性的名称。 只有具有以下类型的属性对文本筛选器有效： String、BigInt、Decimal、Double、Integer、Money 和 DateTime。                       |
| 显示名称 | 显示实体列表时，重写筛选器的标签。 默认情况下，此属性将自动设置为所选属性的名称。 |
| 选项      | 要作为筛选依据的可能值的集合。 有关更多详细信息，请参阅下文。                                                                              |

**范围筛选器集选项**

范围筛选器集可以有任意数量的选项。 每个选项都会生成一个筛选条件，其中包含一个或两个子，必须满足这两个条件，条件才为 true。

选项具有以下属性：

|**名称**              |**Description**                                                                                                                                                                                |
|---------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 运算符1            | 用于筛选结果的第一个比较运算符，例如等于并小于。 选项的运算符列表将取决于为筛选器选择的属性的类型。 例如，数值（Decimal）类型将具有小于或大于的运算符，而字符串属性将使用以或 Contains 开头的运算符。 选择列表和布尔运算符始终相等。                                                                                                                                             |
| 值1               | 此筛选条件使用的第一个值。                                                                                                                                                |
| 运算符2（可选） | 用于筛选结果的第二个比较运算符，例如等于并小于。 选项的运算符列表将取决于为筛选器选择的属性的类型。 例如，数值（Decimal）类型将具有小于或大于的运算符，而字符串属性将使用以或 Contains 开头的运算符。 选择列表和布尔运算符始终相等。                                                                                                                                             |
| 值2（可选）    | 用于此筛选条件的第二个值。                                                                                                                                               |
| 显示名称          | 在 "筛选器" 框中覆盖此选项的显示名称。 默认情况下，将根据选择的运算符和值动态设置此值。                                         |

**动态选择列表集**

动态选择列表集将添加一系列用于筛选的选项，这些选项表示指定选择列表字段的所有值。 这不同于在 "属性筛选器" 集中选择选择列表。 在 "属性筛选器集" 中，必须指定将可供用户筛选的一组选项;在动态选择列表集中，只需指定 "选择列表" 字段，系统将自动提供整套选项。 如果需要更大的控制权，建议使用属性筛选器集。

![动态选择列表设置](../media/set-dynamic-picklist.png "动态选择列表设置")  

动态选择列表集使用以下选项：

|**名称**     |**Description**                                                                                                                                        |
|--------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|
| Attribute    | 要按其进行筛选的实体列表的所选实体类型上的选择列表属性的名称。                                                             |
| 显示名称 | 显示实体列表时，重写筛选器的标签。 默认情况下，此属性将自动设置为所选属性的名称。 |

**动态查找集**

动态查找集添加一系列动态选项以筛选实体列表，并将相关实体绑定到实体列表所选的实体类型。 当用户应用筛选器时，实体列表只显示与至少一个所选相关记录完全匹配的那些记录。

这不同于查找集。 在查找集中，必须手动指定要筛选的相关实体。 在动态查找集中，只需指定要对其进行筛选的关系，将基于指定的相关实体视图生成选项列表。

![动态查找设置](../media/set-dynamic-lookup.png "动态查找设置")  

动态查找集使用以下选项：

|**名称**                      |**Description**                                                                                                                                                                      |
|-------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 关系                  | 要作为筛选依据的实体列表的所选实体类型的相关实体的名称。 只有与实体列表的选定实体类型具有一对多或多对多关系的实体才会显示为此筛选器类型的选项。                                     |
| 显示                          | 要用作筛选器的动态实体列表的源的视图（已保存的查询）。                                                                                              |
| 标签列                  | 视图中提供每个实体的名称值的字段。                                                                                                                    |
| 筛选关系的查找 | 指定由关系字段和登录用户指定的实体之间的关系。 如果由关系字段指定的实体也与联系人之间存在关系，则可以将筛选器选项的列表缩小到与已登录用户相关的选项。  |
| 显示名称                  | 显示实体列表时，重写筛选器的标签。 默认情况下，此值将自动设置为所选关系的名称。                            |

**FetchXML 筛选器**

范围筛选器可以创建一个简单的文本框筛选器（如文本筛选器）或一组选项（如其他筛选器类型）。 利用它，你可以通过使用 FetchXML 为实体列表手动创建几乎任何类型的筛选器。

![FetchXML 筛选器设置](../media/set-fetchxml-filter.png "FetchXML 筛选器设置")

FetchXML 筛选器仅使用一个属性：

|**名称** |**Description**                            |
|----------|--------------------------------------------|
| FetchXML | 表示筛选器的 XML 语句。 |

## <a name="entity-list-map-view"></a>实体列表地图视图

使用实体列表，可以启用并配置数据的地图视图，并通过使用搜索功能 [!INCLUDE[pn-bing](../../../includes/pn-bing.md)] 映射来查找地址附近的位置。 通过使用纬度和经度坐标值填充记录，并指定此部分中列出的必要配置选项，可以在地图上将记录呈现为图钉。 任何没有纬度或经度值的记录都将从搜索中排除。 页面的初始加载将根据默认中心纬度和默认中心经度坐标中的距离值字段（以英里或千米为单位指定）的初始值字段的初始值来显示所有记录。 当使用地图视图时，将忽略指定的视图，并对数据集应用距离查询以返回可映射结果。
>[!Note] 
>德语主权云环境不支持此选项。 此环境中将不会显示 "地图视图" 部分。


## <a name="entity-list-calendar-view"></a>实体列表日历视图

使用实体列表日历视图将实体列表呈现为日历，并将每个单独的记录配置为充当单个事件。

若要使用日历显示记录，这些记录需要包含至少一个日期字段。 若要使事件的开始和结束时间完全一致，需要将相应的字段设置为适当的字段，依此类推。 假设配置了这些字段，将在门户中显示实体列表日历视图。

## <a name="enhanced-view-filter-for-entity-lists"></a>实体列表的增强视图筛选器

如果启用，则可以将实体发布到 OData 源。 OData 协议是一种应用程序级别的协议，用于通过 RESTful web 服务与数据进行交互。 可在 web 浏览器中查看此源中的数据，客户端 web 应用程序使用此数据，或将其导入 [!INCLUDE[pn-excel-short](../../../includes/pn-excel-short.md)]。

## <a name="entity-list-odata-feeds"></a>实体列表 OData 源

如果要保护记录，则可以使用实体权限，但如果只想将筛选器提供为与当前门户用户相关的筛选器选项集的一部分，则可以使用实体列表功能。 此功能支持在任何深度筛选当前用户、用户的父帐户或网站。 只需生成视图筛选器以匹配任何单个联系人记录，代码就会将其值替换为运行时的实际值&mdash;无需在 "筛选条件" 部分中为字段赋值。

> [!Note]
> 发布的 OData 数据源是匿名的，没有任何授权检查;因此，不要为不适合匿名门户访问的数据启用 oData 源。

### <a name="see-also"></a>另请参阅

[配置门户](configure-portal.md)  
[重定向到门户上的新 URL](add-redirect-url.md)  
