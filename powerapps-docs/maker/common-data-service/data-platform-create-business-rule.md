---
title: 创建 Common Data Service for Apps 中的业务规则 | Microsoft Docs
description: 有关如何创建 Common Data Service (CDS) for Apps 中的业务规则的分步说明。
author: clwesene
manager: kfile
ms.service: powerapps
ms.component: cds
ms.topic: conceptual
ms.date: 03/21/2018
ms.author: clwesene
ms.openlocfilehash: 5cf2a312ddba83312805f6b3b517738f1bc1da78
ms.sourcegitcommit: 0b051bba173353d7ceda3b60921e7e009eb00709
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 07/24/2018
ms.locfileid: "39218018"
---
# <a name="create-a-business-rule"></a>创建业务规则

可以创建业务规则和建议，以应用逻辑和验证，无需编写代码或创建插件。业务规则提供简单的界面以实现并维护快速变化且通用的规则。 
  
通过组合条件和操作，可以借助业务规则完成下列任何操作：  
  
* 设置字段值  
* 清除字段值  
* 设置字段要求级别  
* 显示或隐藏字段  
* 启用或禁用字段  
* 验证数据并显示错误信息  
* 创建基于商业智能的业务建议。  
  
## <a name="differences-between-canvas-and-model-driven-apps"></a>画布应用和模型驱动应用之间的差异

模型驱动应用可以使用业务规则上的所有可用操作，但是画布应用并不能使用所有业务规则操作。 下列操作在画布应用上不可用：

* 显示或隐藏字段  
* 启用或禁用字段  
* 创建基于商业智能的业务建议。  

## <a name="prerequisites"></a>先决条件
若要遵循本主题，必须切换到可以创建实体并编辑实体的[环境](../canvas-apps/working-with-environments.md)。

## <a name="create-a-business-rule"></a>创建业务规则
  
1. 登录 [PowerApps](https://web.powerapps.com?utm_source=padocs&utm_medium=linkinadoc&utm_campaign=referralsfromdoc)，然后单击或点击左边缘附近的“数据”的下箭头。

2. 在显示的列表中单击或点击“实体”。
  
3. 打开要为其创建业务规则的实体（例如，打开“帐户”实体），然后单击“业务规则”选项卡。  

4. 单击“新建”。  
  
    业务规则设计器窗口随即打开，其中有一条已为你创建的条件。 所有规则都是从条件开始的。 基于条件，业务规则采用一个或多个操作。  

    > [!TIP]
    > 如果要修改现有业务规则，必须在修改规则之前将其停用。  
  
5. 根据需要，可以在窗口左上角的说明框中添加说明。
  
6. 根据下表设置范围：  
  
    |||  
    |-|-|  
    |**所选项**|**对应范围**|  
    |**实体**|模型驱动窗体和服务器|  
    |**所有窗体**|模型驱动窗体|  
    |特定窗体（例如“帐户”窗体）|仅为该模型驱动窗体|  

    > [!TIP]
    > 如果要生成画布应用，则必须将“实体”用作范围。
  
7. **添加条件。** 将更多条件添加到业务规则：  
  
    1. 将“条件”组件从“组件”选项卡拖动到设计器中的加号处。  
  
        ![在业务规则中添加条件](./media/data-platform-cds-create-business-rule/add-condition-business-rule.png "在业务规则中添加条件")  
  
    2. 要设置条件属性，请在设计器窗口中单击“条件”组件，然后在屏幕右侧的“属性”选项卡上设置属性。 设置属性时，Common Data Service 会在“属性”选项卡底部创建一个表达式。  
  
    3. 若要将其他子句（AND 或 OR）添加到条件，请单击“属性”选项卡中的“新建”，创建新规则并为该规则设置属性。 在“规则逻辑”字段中，可以指定是否将新规则添加为 AND 或 OR。  
  
        ![向条件添加新规则](./media/data-platform-cds-create-business-rule/add-new-rule-condition.png "向条件添加新规则")  
  
    4. 设置完条件属性后，单击“应用”。  
  
8. **添加操作。** 若要添加操作，请完成以下操作：  
  
    1. 将“组件”选项卡中的一个操作组件拖动到“条件”组件旁边的加号处。 如果希望业务规则在满足条件时执行该操作，请将操作拖动至复选标记旁边的加号处；如果希望规则在不满足条件时执行该操作，请将操作拖动至 x 旁边的加号处。
  
        ![将操作拖动到业务规则](./media/data-platform-cds-create-business-rule/drag-an-action-business-rule.png "")  
  
    2. 要设置操作属性，请在设计器窗口中单击“操作”组件，然后设置“属性”选项卡中的属性。  
  
    3. 设置完属性后，单击“应用”。  
  
9. **添加业务建议。（仅限模型驱动）** 若要添加业务建议，请完成以下操作：  
  
    1. 将“组件”选项卡中的“建议”组件拖动到“条件”组件旁边的加号处。 如果希望业务规则在满足条件时执行该操作，请将建议组件拖动至复选标记旁边的加号处；如果希望规则在不满足条件时执行该操作，则拖动至 x 旁边的加号处。  
  
    2. 要设置建议属性，请在设计器窗口中单击“建议”组件，然后设置“属性”选项卡中的属性。  
  
    3. 若要向建议添加更多操作，请拖动“组件”选项卡中的操作，并在“属性”选项卡中设置每个操作的属性。  
  
        > [!NOTE]
        >  创建建议时，Common Data Service 会默认添加一个操作。 若要查看建议中的所有操作，请单击“建议”组件上的“详细信息”。  
  
    4. 设置完属性后，单击“应用”。  
  
10. 若要验证业务规则，请在操作栏上单击“验证”。  
  
11. 若要保存业务规则，请在操作栏上单击“保存”。  
12. 若要激活业务规则，请在“解决方案资源管理器”窗口中选择它，然后单击“激活”。 在设计器窗口中无法激活业务规则。  
  
    > [!TIP]
    >  在设计器窗口中处理业务规则时，请记住以下提示：  
    >   
    > - 若要生成业务规则窗口中所有内容的快照，请在操作栏上单击“快照”。 这一点非常有用，例如在你想与团队成员共享业务规则并征求意见时。  
    > - 使用 mini-map 快速导航至流程中的不同部分。 这在具备需要滚动屏幕的复杂流程时非常有用。  
    > - 在向业务规则添加条件、操作和业务建议时，Common Data Service 会在设计器窗口底部生成业务规则的代码。 此代码是只读的。  
  
## <a name="localize-error-messages-used-in-business-rules"></a>将业务规则中使用的错误消息本地化  
 如果是多种语言的组织，那么需要将设置的所有错误消息本地化。 每设置一条消息，系统都会生成一个标记。 如果在组织中导出翻译，可以添加消息的本地化版本并将这些标记导回 Common Data Service，从而让不使用基本语言的人可以查看翻译后的消息。  
  