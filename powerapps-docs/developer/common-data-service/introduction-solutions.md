---
title: 解决方案简介 | Microsoft Docs
description: 了解如何使用解决方案创建模型应用。
services: ''
suite: powerapps
documentationcenter: na
author: JimDaly
manager: faisalmo
editor: ''
tags: ''
ms.service: powerapps
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 03/19/2018
ms.author: jdaly
ms.openlocfilehash: b9e06888a23426a44eeaf4354bf456dd8b15cfad
ms.sourcegitcommit: 59785e9e82da8f5bd459dcb5da3d5c18064b0899
ms.translationtype: HT
ms.contentlocale: zh-CN
ms.lasthandoff: 03/22/2018
---
# <a name="introduction-to-solutions"></a>解决方案简介

解决方案是定制员和开发人员如何创作、打包和维护扩展 Common Data Service 的软件单元。 定制者和开发人员分发解决方案，以便组织可使用 Common Data Service for Apps 安装和卸载由解决方案定义的业务功能。

对 Common Data Service for Apps 制定的每个自定义项都是解决方案的一部分。 会跟踪所应用的每项更改，并且可计算任何依赖关系。 导出托管解决方案时，该托管解决方案会将已对该解决方案应用的所有更改包含到文件中，方便你将其导入到不同的 Common Data Service for Apps 环境中。

如果要在不同的 Common Data Service for Apps 环境间传输自定义项或扩展，或分发使用 AppSource 的解决方案，则必须了解解决方案框架。

## <a name="unmanaged-and-managed-solutions"></a>非托管和托管解决方案

有两种类型的解决方案：托管和非托管。

托管解决方案是一种完整的解决方案，用于分发和安装。 
- 用户无法编辑托管解决方案的组件。
- 用户无法导出托管解决方案。
- 用户可将非托管自定义项添加到托管解决方案的组件中。 执行此操作时，将在非托管自定义项和托管解决方案间创建依赖关系。 存在依赖关系时，只有删除该依赖关系才能卸载托管解决方案。
- 删除（卸载）托管解决方案时，将删除其中包含的所有自定义项和扩展。

 > [!IMPORTANT]
 > 卸载托管解决方案时，以下数据将丢失：存储在托管解决方案自定义实体中的数据，以及存储其他实体上托管解决方案自定义特性中的数据（其他实体并非托管解决方案的一部分）。

非托管解决方案仍在开发中，或者尚不能分发。 
- 当解决方案处于非托管状态时，可继续向其添加和删除组件。 
- 可导出非托管解决方案以将非托管自定义项从一个环境传输到另一个环境。
- 删除非托管解决方案时，将仅删除其中包含的任何自定义项的解决方案容器。 所有非托管自定义项仍然有效，并属于默认解决方案。 
- 完成非托管解决方案并且想分发它时，请将其导出为托管解决方案。

 > [!NOTE]
 > 无法将托管解决方案导入包含原始非托管解决方案的相同环境中。 要测试托管解决方案，需要一个单独的环境将其导入。

## <a name="solution-publishers"></a>解决方案发布商
每个解决方案均链接到解决方案发布商。 解决方案发布商提供有关如何联系发布商以及自定义前缀值的信息。 默认值为 `new`。

将任何架构更改作为解决方案的一部分包含在内时，会在架构项的名称前加上解决方案发布商自定义前缀。 任何自定义操作也会将此值附加到架构项名称的前面。 这非常有用，因为它可以轻松识别哪个解决方案添加了架构项或自定义操作。 解决方案中的所有架构项和自定义操作无需使用相同的自定义前缀，但强烈建议使用此前缀。

> [!IMPORTANT]
> 开始创建解决方案前，应创建解决方案发布商记录并创建链接到该记录的新解决方案。 应确保自定义前缀代表一个对你有意义的值。 

如果要将更新发布到已发布的解决方案中，则解决方案发布商的选择至关重要。 更新仅可应用于具有与原始托管解决方案相同的发布商的托管解决方案。 

详细信息：[Dynamics 365 客户参与开发人员指南：维护托管解决方案 > 创建托管解决方案更新](/dynamics365/customer-engagement/developer/maintain-managed-solutions#create-managed-solution-updates)

## <a name="create-a-solution-publisher-and-solution"></a>创建解决方案发布商和解决方案 

要创建解决方案发布商和解决方案，需要导航到 Dynamics 365 自定义区域。

访问 [powerapps.com](https://web.powerapps.com)

1. 选择左上角的 Waffle 图标
2. 在弹出窗口中，选择“所有应用”。
3. 查找“Dynamics 365 - 自定义应用”。
 你可能希望单击省略号 (...) 并选择“固定此应用”，以便下次导航时更加容易。
4. 单击“Dynamics 365 - 自定义应用”应用以选择。
5. 导航到“设置” > “自定义” > “自定义项”。

访问 [home.dynamics.com](http://home.dynamics.com/)

1. 查找“Dynamics 365 - 自定义”磁贴并单击它。
2. 导航到“设置” > “自定义” > “自定义项”。

### <a name="create-a-solution-publisher"></a>创建解决方案发布商

1. 从自定义区域中，选择“发布商”。
2. 单击“新建”。
3. 在发布商窗体中输入“显示名称”。 将根据显示名称生成“名称”值。 可接受生成的值或指定新值。
4. 在“前缀”字段中，指定在开发解决方案时应附加到任何自定义架构项中的自定义前缀。 默认值为 `new`。 选择代表组织的值，并帮助用户识别系统中安装的哪些组件来自你的解决方案。
5. 根据对自定义前缀的选择生成“选项值前缀”值。 此值将附加到选项集选项的任何值中，该选项集选项将添加到解决方案的特性中。 此值有助于识别添加到解决方案中的任何选项。
6. 在窗体的“联系人详细信息”部分中，可添加要为安装解决方案的人员提供的任何联系信息。
7. 完成后，单击“保存并关闭”。

### <a name="create-a-solution"></a>创建解决方案

1. 从自定义区域中，选择“解决方案”。
2. 单击“新建”。
3. 在解决方案窗体中，输入“显示名称”。 将根据显示名称生成“名称”值。 可接受生成的值或指定新值。
4. 在“发布商”字段中查找在[创建解决方案发布商](#create-a-solution-publisher)中创建的发布商
5. 在“版本”字段中为解决方案选择适当版本，例如 1.0.0.0。
6. 完成后，单击“保存”。

> [!IMPORTANT]
> 每当创建将包含在此解决方案中的新解决方案组件时，请使用此解决方案或与同一解决方案发布商关联的其他解决方案来添加它。
> 可将在与其他解决方案发布商关联的解决方案上下文中创建的解决方案组件添加到此解决方案中，但它们可能具有不一致的自定义前缀值集。

## <a name="solution-layering"></a>解决方案分层

可安装两个彼此矛盾的托管解决方案，或对环境应用某些自定义项以替代托管解决方案。 它的工作原理是什么？

它的工作原理是，Common Data Service for Apps 按照安装顺序评估托管解决方案，并最后评估不在托管解决方案中的任何自定义项。

下图介绍了托管解决方案和非托管自定义项如何交互以控制应用程序运行时包含的内容。

![显示解决方案分层的关系图](media/solution-layering.png)

在此示例中，托管解决方案替代或追加系统解决方案中定义的默认行为。 任何非托管自定义项可替代或追加在应用程序中可见的自定义项。

详细信息：[Dynamics 365 客户参与开发人员指南：解决方案简介 > 非托管和托管解决方案](/dynamics365/customer-engagement/developer/introduction-solutions#unmanaged-and-managed-solutions)

## <a name="managed-properties"></a>托管​​属性

分发托管解决方案时，安装解决方案的任何人均可将其非托管自定义项添加到该解决方案中。 然后可将这些非托管自定义项添加到解决方案中（作为依赖于解决方案的托管解决方案分发）。 但如果不希望人员执行此操作，该怎么办？ 作为托管解决方案的发布商，可使用托管属性来禁用托管解决方案组件的特定自定义项。

详细信息：[Dynamics 365 客户参与开发人员指南：使用托管属性](/dynamics365/customer-engagement/developer/use-managed-properties)

## <a name="modular-solutions"></a>模块化解决方案

可使用解决方案框架创建带有全套功能的离散组件集。 可安装和卸载每个托管解决方案，以将客户的部署恢复到原始状态。 创建的每个托管解决方案都在系统解决方案上运行，并且可访问该基础解决方案的功能。

还可构建在其他解决方案上运行的托管解决方案，以创建一组可由不同解决方案共享的功能。 通过这种方式，可构建和维护常用模块作为支持多种解决方案的解决方案。 因此，客户仅需安装适合他们的解决方案，而无需在每个解决方案中包含相同的共享功能。 如果需要将更新推送到支持多个解决方案的解决方案，则只需更新常用模块。

然后，客户、系统实施人员和其他 ISV 可在解决方案上构建解决方案，以实现所需的特定自定义项。

一组业务功能由多个解决方案组成时，这些解决方案称为包。 可使用 Package Deployer 将多个解决方案合并到一个可安装单元中。

## <a name="deploy-solution-packages"></a>部署解决方案包

使用 Package Deployer 为包创建自定义安装程序，其中包括 
- 一个或多个解决方案文件。
- 平面文件或导出的配置数据文件。 
- 可在部署包前、部署包时或部署包后运行的自定义代码。
- 可在部署过程开始和结束时显示的特定于包的 HTML 内容。 这对描述包中部署的解决方案和文件很有用。

详细信息：[Dynamics 365 客户参与开发人员指南：为 Dynamics 365 Package Deployer 创建包](/dynamics365/customer-engagement/developer/create-packages-package-deployer)。

## <a name="team-development-of-solutions"></a>解决方案的团队开发

解决方案文件是不适用于源代码控制或团队开发的一个二进制文件。 多个开发人员无法处理解决方案中的自定义组件。

SolutionPackager 工具解决了解决方案文件的源代码控制和团队开发问题。 该工具可识别压缩解决方案文件中的各个组件，并将其提取到各个文件中。 该工具还可通过打包先前提取的文件来重新创建解决方案文件。 这使许多人员能够独立处理一个解决方案，并将更改提取到一个常用位置。 由于解决方案文件中的每个组件都分解成了多个文件，因此可在不替代先前更改的情况下合并自定义项。 SolutionPackager 工具的第二个用途是，可在自动构建过程中调用它，以在无需活动的 Dynamics 365 实例的情况下，从先前提取的组件文件中生成压缩解决方案文件。

详细信息：[Dynamics 365 客户参与开发人员指南：用于团队开发的解决方案工具](/dynamics365/customer-engagement/developer/solution-tools-team-development)

### <a name="see-also"></a>另请参阅

[Common Data Service for Apps 开发人员概述](overview.md)